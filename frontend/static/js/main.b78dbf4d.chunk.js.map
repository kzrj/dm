{"version":3,"sources":["redux/redux-sauce/auth.js","redux/redux-sauce/feedbacks.js","redux/redux-sauce/products.js","redux/api/endpoints.js","redux/api/utils.js","redux/api/authApi.js","redux/api/productsApi.js","redux/api/shopsApi.js","redux/api/feedbacksApi.js","redux/sagas/authSagas.js","redux/sagas/productsSagas.js","redux/sagas/shopsSagas.js","redux/sagas/feedbacksSagas.js","redux/sagas/index.js","redux/store/index.js","containers/Main.js","components/ShopForms.js","containers/ShopDetail.js","components/ProductForms.js","containers/ShopCabinet.js","containers/ViberLogin.js","containers/HeaderContainer.js","containers/AccountAdsContainer.js","index.js","components/utils.js","redux/redux-sauce/shops.js"],"names":["createActions","loginRequest","loginSuccess","loginFailure","logoutRequest","logoutSuccess","logoutFailure","checkTokenRequest","checkTokenSuccess","checkTokenFail","partialUpdateUserRequest","partialUpdateUserFail","partialUpdateUserSuccess","Types","Creators","AuthTypes","INITIAL_STATE","Immutable","fetching","user","error","isLoggedIn","isLoggingIn","AuthSelectors","getUser","state","login","payload","merge","profile","action","message","reducer","createReducer","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","CHECK_TOKEN_REQUEST","CHECK_TOKEN_FAIL","CHECK_TOKEN_SUCCESS","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILURE","PARTIAL_UPDATE_USER_REQUEST","PARTIAL_UPDATE_USER_SUCCESS","PARTIAL_UPDATE_USER_FAIL","getFeedbacksRequest","getFeedbacksFail","getFeedbacksSuccess","createFeedbackRequest","createFeedbackFail","createFeedbackSuccess","updateFeedbackRequest","updateFeedbackFail","updateFeedbackSuccess","deleteFeedbackRequest","deleteFeedbackFail","deleteFeedbackSuccess","FeedbacksTypes","listFetching","eventFetching","feedback_list","categories","errorList","detailFetching","feedbackDetail","errorDetail","errorEvent","FeedbacksSelectors","getFeedbacks","feedbacks","getCategories","feedbackInList","getObjectbyId","id","index","indexOf","slice","GET_FEEDBACKS_REQUEST","GET_FEEDBACKS_SUCCESS","GET_FEEDBACKS_FAIL","CREATE_FEEDBACK_REQUEST","CREATE_FEEDBACK_SUCCESS","CREATE_FEEDBACK_FAIL","UPDATE_FEEDBACK_REQUEST","UPDATE_FEEDBACK_SUCCESS","UPDATE_FEEDBACK_FAIL","DELETE_FEEDBACK_REQUEST","DELETE_FEEDBACK_SUCCESS","DELETE_FEEDBACK_FAIL","getProductsRequest","getProductsFail","getProductsSuccess","getProductDetailRequest","getProductDetailFail","getProductDetailSuccess","getCategoriesRequest","getCategoriesFail","getCategoriesSuccess","ProductsTypes","product_list","productDetail","ProductsSelectors","getProducts","products","tours_info","GET_PRODUCTS_REQUEST","GET_PRODUCTS_SUCCESS","GET_PRODUCTS_FAIL","GET_PRODUCT_DETAIL_REQUEST","GET_PRODUCT_DETAIL_SUCCESS","GET_PRODUCT_DETAIL_FAIL","GET_CATEGORIES_REQUEST","GET_CATEGORIES_SUCCESS","GET_CATEGORIES_FAIL","apiUrl","JWT_AUTH","JWT_CHECK_TOKEN","updateUser","GET_PRODUCTS","getProductDetail","addProductImage","deleteProductImage","GET_SHOPS","getShopDetail","updateShop","likeShop","GET_CATEGORIES","FEEDBACKS","feedback","parseErrorData","response","errorObj","status","statusText","data","JSON","stringify","property","createUrlParamsFromFilters","filters","params","URLSearchParams","Object","keys","forEach","key","Array","append","map","value","logIn","username","password","url","endpoints","formData","FormData","axios","method","headers","then","localStorage","setItem","token","catch","err","Error","checkToken","post","logOut","removeItem","partialUpdateUser","nickname","getItem","get","createProduct","title","price","description","category","partialUpdateProduct","active","deleteProduct","original","image","getShops","createShop","name","phone","delivery","profile_id","console","log","createFeedback","shop","rel_feedback","text","updateFeedback","deleteFeedback","api","call","put","AuthActions","ShopsActions","getShopOwnSuccess","ProductsActions","results","getShopsSuccess","getShopsFail","getShopDetailSuccess","getShopDetailFail","createShopSuccess","createShopFail","updateShopSuccess","updateShopFail","createProductSuccess","createProductFail","partialUpdateProductSuccess","partialUpdateProductFail","deleteProductSuccess","deleteProductFail","addProductImageSuccess","addProductImageFail","deleteProductImageSuccess","deleteProductImageFail","likeShopSuccess","likeShopFail","FeedbacksActions","addToFeedbacksList","removeFromFeedbacksList","root","authApi","AuthApi","productsApi","ProductsApi","shopsApi","ShopsApi","feedbacksApi","FeedbacksApi","all","takeEvery","productsSaga","ShopsTypes","GET_SHOPS_REQUEST","shopsSaga","GET_SHOP_DETAIL_REQUEST","CREATE_SHOP_REQUEST","UPDATE_SHOP_REQUEST","LIKE_SHOP_REQUEST","CREATE_PRODUCT_REQUEST","PARTIAL_UPDATE_PRODUCT_REQUEST","DELETE_PRODUCT_REQUEST","ADD_PRODUCT_IMAGE_REQUEST","DELETE_PRODUCT_IMAGE_REQUEST","feedbacksSaga","reducers","combineReducers","auth","require","shops","form","formReducer","CatButtonComp","props","cat","className","handleClick","onClick","data-id","ru_name","images","length","style","src","catalog_image","CatButton","history","useHistory","catName","useParams","push","classActive","ShopsList","shop_list","to","aria-hidden","likes_list","feedbacks_list","category_products","product","category_images","Main","this","Helmet","content","Component","connect","notifications","dispatch","query","getShopsRequest","renderTextField","label","placeholder","input","multiline","meta","touched","invalid","labelClass","custom","TextField","helperText","InputLabelProps","renderSelectField","formClass","children","FormControl","InputLabel","Select","FormHelperText","renderFromHelper","validateShopForm","values","errors","field","ShopForm","useState","delEnabled","setDel","Field","component","hidden","InitShopForm","parentSubmit","pristine","submitting","reset","handleSubmit","initialValues","onSubmit","type","disabled","EditShopForm","setEdit","FeedbackCreateForm","FeedbackEditForm","setEditOnOff","Feedback","OwnFeedback","editOnOff","edit","delete","Feedbacks","shop_id","user_id","whoLikeList","whoFeedbackList","showFeed","setShowFeed","isLike","includes","isFeedback","feedbackCount","showFeedbacks","fb","editFeedback","shopId","ProductTextBody","CatProductList","catProducts","i","thumb_image","height","witdh","reduxForm","validate","ShopDetail","active_cat","bind","match","feedbackCreateForm","feedbackEditForm","shopDetail","routing","ShopActions","getShopDetailRequest","likeShopRequest","ProductForm","variant","rowsMax","CreateProductForm","validateProductForm","UpdateProductForm","clickEdit","ProductContent","btnClass","clickActive","data-active","ProductEdit","editId","clickEditDone","CircularProgress","onChange","data-product-id","ProductsEdit","editList","needToRefresh","e","target","dataset","setState","submitUpdateProduct","submitActivateProduct","files","productId","clickDelete","ShopInfoEditable","createNewProduct","setCNP","createProductSubmit","ShopCabinet","submitCreateShop","submitUpdateShop","submitCreateProduct","editShopForm","initShopForm","createProductForm","updateProduct","updateProductForm","shopOwn","createShopRequest","updateShopRequest","createProductRequest","partialUpdateProductRequest","deleteProductRequest","addProductImageRequest","deleteProductImageRequest","ViberAuthenticationComponent","access","ModalAuth","tabindex","role","aria-labelledby","data-dismiss","aria-label","href","Header","login2","logout","data-toggle","data-target","AccountAdsContainer","store","sagaMiddleware","createSagaMiddleware","createStore","composeWithDevTools","applyMiddleware","run","rootSaga","configureStore","ReactDOM","render","classname","exact","path","document","getElementById","lodashToggle","array","item","_","xor","list","obj","element","getShopOwnRequest","getShopOwnFail","eventError","ShopsSelectors","productInList","GET_SHOPS_SUCCESS","GET_SHOPS_FAIL","GET_SHOP_DETAIL_SUCCESS","GET_SHOP_DETAIL_FAIL","GET_SHOP_OWN_REQUEST","GET_SHOP_OWN_SUCCESS","GET_SHOP_OWN_FAIL","CREATE_SHOP_SUCCESS","CREATE_SHOP_FAIL","UPDATE_SHOP_SUCCESS","UPDATE_SHOP_FAIL","CREATE_PRODUCT_SUCCESS","CREATE_PRODUCT_FAIL","PARTIAL_UPDATE_PRODUCT_SUCCESS","PARTIAL_UPDATE_PRODUCT_FAIL","DELETE_PRODUCT_SUCCESS","DELETE_PRODUCT_FAIL","ADD_PRODUCT_IMAGE_SUCCESS","ADD_PRODUCT_IMAGE_FAIL","DELETE_PRODUCT_IMAGE_SUCCESS","DELETE_PRODUCT_IMAGE_FAIL","ADD_TO_FEEDBACKS_LIST","REMOVE_FROM_FEEDBACKS_LIST","LIKE_SHOP_SUCCESS","LIKE_SHOP_FAIL"],"mappings":"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","file":"static/js/main.b78dbf4d.chunk.js","sourcesContent":["import { createReducer, createActions } from 'reduxsauce'\nimport Immutable from 'seamless-immutable'\n\n/* ------------- Types and Action Creators ------------- */\n\nconst { Types, Creators } = createActions({\n  loginRequest: ['payload'],\n  loginSuccess: ['payload'],\n  loginFailure: ['payload'],\n\n  logoutRequest: null,\n  logoutSuccess: null,\n  logoutFailure: ['error'],\n\n  checkTokenRequest: ['payload'],\n  checkTokenSuccess: ['payload'],\n  checkTokenFail: ['error'],\n\n  partialUpdateUserRequest: ['payload'],\n  partialUpdateUserFail: ['payload'],\n  partialUpdateUserSuccess: ['payload'],\n})\n\nexport const AuthTypes = Types\nexport default Creators\n\n/* ------------- Initial State ------------- */\n\nexport const INITIAL_STATE = Immutable({\n  fetching: false,\n  user: null,\n  error: '',\n  isLoggedIn: false,\n  isLoggingIn: false\n})\n\n/* ------------- Selectors ------------- */\n\nexport const AuthSelectors = {\n  getUser: state => state.user,\n  login: state => state.user,\n}\n\n/* ------------- Reducers ------------- */\n\n// login request\nexport const loginRequest = (state, { payload }) => {\n  return state.merge({ fetching: true, user: null, isLoggingIn: true, isLoggedIn: false })\n}\n  \n\n// login success\nexport const loginSuccess = (state, { payload, user }) => {\n  return state.merge({ fetching: false, error: null, user: payload.profile, isLoggedIn: true, isLoggingIn: false })\n}\n\n// login fail\nexport const loginFailure = (state, action) => {\n  const { error } = action\n  return state.merge({ fetching: false, error: error, user: null, isLoggedIn: false, isLoggingIn: false })\n}\n\n\n// logout request\nexport const logoutRequest = (state) => {\n  return state.merge({ fetching: true, isLoggingIn: true })\n}\n\nexport const logoutSuccess = (state) => {\n  return state.merge({ fetching: false, error: null, user: null, isLoggingIn: false, isLoggedIn: false  })\n}\n\nexport const logoutFailure = (state, { error }) => {\n  return state.merge({ fetching: false, error: error, isLoggingIn: false })\n}\n \nexport const checkTokenRequest = (state, { payload }) => {\n  return state.merge({ fetching: true })\n}\n\nexport const checkTokenSuccess = (state, { payload }) => {\n  return state.merge({ fetching: false, error: null, user: payload.profile, isLoggedIn: true, isLoggingIn: false })\n}\n\nexport const checkTokenFail = (state, { error }) => {\n  return state.merge({ fetching: false, error: error, user: null, isLoggedIn: false, isLoggingIn: false })\n}\n\n// partial update User\nexport const partialUpdateUserRequest = (state, { payload }) => {\n  return state.merge({ fetching: true, message: '' })\n}\n\nexport const partialUpdateUserSuccess = (state, { payload }) => {\n  return state.merge({ fetching: false, error: null, user: payload.profile })\n}\n\nexport const partialUpdateUserFail = (state, { payload }) => {\n  return state.merge({ fetching: false, error: payload, message: '' })\n}\n\n/* ------------- Hookup Reducers To Types ------------- */\n\nexport const reducer = createReducer(INITIAL_STATE, {\n  [Types.LOGIN_REQUEST]: loginRequest,\n  [Types.LOGIN_SUCCESS]: loginSuccess,\n  [Types.LOGIN_FAILURE]: loginFailure,\n  \n  [Types.CHECK_TOKEN_REQUEST]: checkTokenRequest,\n  [Types.CHECK_TOKEN_FAIL]: checkTokenFail,\n  [Types.CHECK_TOKEN_SUCCESS]: checkTokenSuccess,\n  \n  [Types.LOGOUT_REQUEST]: logoutRequest,\n  [Types.LOGOUT_SUCCESS]: logoutSuccess,\n  [Types.LOGOUT_FAILURE]: logoutFailure,\n\n  [Types.PARTIAL_UPDATE_USER_REQUEST]: partialUpdateUserRequest,\n  [Types.PARTIAL_UPDATE_USER_SUCCESS]: partialUpdateUserSuccess,\n  [Types.PARTIAL_UPDATE_USER_FAIL]: partialUpdateUserFail,\n  \n})\n","import { createReducer, createActions } from 'reduxsauce'\r\nimport Immutable from 'seamless-immutable'\r\n\r\nimport { getObjectbyId } from '../../components/utils'\r\n\r\n/* ------------- Types and Action Creators ------------- */\r\nconst { Types, Creators } = createActions({\r\n    getFeedbacksRequest: ['payload'],\r\n    getFeedbacksFail: ['payload'],\r\n    getFeedbacksSuccess: ['payload'],\r\n\r\n    createFeedbackRequest: ['payload'],\r\n    createFeedbackFail: ['payload'],\r\n    createFeedbackSuccess: ['payload'],\r\n\r\n    updateFeedbackRequest: ['payload'],\r\n    updateFeedbackFail: ['payload'],\r\n    updateFeedbackSuccess: ['payload'],\r\n\r\n    deleteFeedbackRequest: ['payload'],\r\n    deleteFeedbackFail: ['payload'],\r\n    deleteFeedbackSuccess: ['payload'],\r\n\r\n})\r\n\r\nexport const FeedbacksTypes = Types\r\nexport default Creators\r\n\r\n\r\n/* ------------- Initial State ------------- */\r\nexport const INITIAL_STATE = Immutable({\r\n    listFetching: false,\r\n    eventFetching: false,\r\n    \r\n    feedback_list: [],\r\n    categories: [],\r\n    errorList: null,\r\n\r\n    detailFetching: null,\r\n    feedbackDetail: null,\r\n    errorDetail: null,\r\n\r\n    errorEvent: null,\r\n\r\n    message: '',\r\n})\r\n\r\n\r\n/* ------------- Selectors ------------- */\r\nexport const FeedbacksSelectors = {\r\n    getFeedbacks: state => state.feedbacks.feedback_list,\r\n    getCategories: state => state.feedbacks.categories,\r\n}\r\n\r\n\r\n/* ------------- Reducers ------------- */\r\n// Get Feedbacks\r\nexport const getFeedbacksRequest = (state, { payload }) => {\r\n    return state.merge({ listFetching: true, feedback_list: [] })\r\n}\r\n\r\nexport const getFeedbacksSuccess = (state, { payload }) => {\r\n    return state.merge({ listFetching: false, errorList: null, feedback_list: payload })\r\n}\r\n\r\nexport const getFeedbacksFail = (state, { payload }) => {\r\n    return state.merge({ listFetching: false, errorList:payload, feedback_list: [] })\r\n}\r\n\r\n// create Feedbacks\r\nexport const createFeedbackRequest = (state, { payload }) => {\r\n    return state.merge({ eventFetching: true, })\r\n}\r\n\r\nexport const createFeedbackSuccess = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorEvent: null, message: payload.message })\r\n}\r\n\r\nexport const createFeedbackFail = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorEvent: payload, })\r\n}\r\n\r\n// update \r\nexport const updateFeedbackRequest = (state, { payload }) => {\r\n    return state.merge({ eventFetching: true, message: '' })\r\n}\r\n\r\nexport const updateFeedbackSuccess = (state, { payload }) => {\r\n    const feedbackInList = getObjectbyId(state.feedback_list, payload.id)\r\n    const index = state.feedback_list.indexOf(feedbackInList)\r\n    return state.merge({ \r\n        eventFetching: false,\r\n        errorEvent: null,\r\n        feedback_list: [\r\n            ...state.feedback_list.slice(0, index),\r\n            payload,\r\n            ...state.feedback_list.slice(index + 1)\r\n            ]\r\n        })\r\n}\r\n\r\nexport const updateFeedbackFail = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorEvent: payload, message: '' })\r\n}\r\n\r\n// delete\r\nexport const deleteFeedbackRequest = (state, { payload }) => {\r\n    return state.merge({ eventFetching: true, message: '' })\r\n}\r\n\r\nexport const deleteFeedbackSuccess = (state, { payload }) => {\r\n    const feedbackInList = getObjectbyId(state.feedback_list, payload.id)\r\n    const index = state.feedback_list.indexOf(feedbackInList)\r\n    return state.merge({ \r\n        eventFetching: false,\r\n        errorEvent: null,\r\n        feedback_list: [\r\n            ...state.feedback_list.slice(0, index),\r\n            ...state.feedback_list.slice(index + 1)\r\n            ]\r\n        })\r\n}\r\n\r\nexport const deleteFeedbackFail = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorEvent: payload, message: '' })\r\n}\r\n\r\n/* ------------- Hookup Reducers To Types ------------- */\r\n\r\nexport const reducer = createReducer(INITIAL_STATE, {\r\n    [Types.GET_FEEDBACKS_REQUEST]: getFeedbacksRequest,\r\n    [Types.GET_FEEDBACKS_SUCCESS]: getFeedbacksSuccess,\r\n    [Types.GET_FEEDBACKS_FAIL]: getFeedbacksFail,\r\n\r\n    [Types.CREATE_FEEDBACK_REQUEST]: createFeedbackRequest,\r\n    [Types.CREATE_FEEDBACK_SUCCESS]: createFeedbackSuccess,\r\n    [Types.CREATE_FEEDBACK_FAIL]: createFeedbackFail,\r\n\r\n    [Types.UPDATE_FEEDBACK_REQUEST]: updateFeedbackRequest,\r\n    [Types.UPDATE_FEEDBACK_SUCCESS]: updateFeedbackSuccess,\r\n    [Types.UPDATE_FEEDBACK_FAIL]: updateFeedbackFail,\r\n\r\n    [Types.DELETE_FEEDBACK_REQUEST]: deleteFeedbackRequest,\r\n    [Types.DELETE_FEEDBACK_SUCCESS]: deleteFeedbackSuccess,\r\n    [Types.DELETE_FEEDBACK_FAIL]: deleteFeedbackFail,\r\n})\r\n","import { createReducer, createActions } from 'reduxsauce'\r\nimport Immutable from 'seamless-immutable'\r\n\r\n\r\n/* ------------- Types and Action Creators ------------- */\r\nconst { Types, Creators } = createActions({\r\n    getProductsRequest: ['payload'],\r\n    getProductsFail: ['payload'],\r\n    getProductsSuccess: ['payload'],\r\n\r\n    getProductDetailRequest: ['payload'],\r\n    getProductDetailFail: ['error'],\r\n    getProductDetailSuccess: ['payload'],\r\n\r\n    getCategoriesRequest: ['payload'],\r\n    getCategoriesFail: ['payload'],\r\n    getCategoriesSuccess: ['payload'],\r\n\r\n})\r\n\r\nexport const ProductsTypes = Types\r\nexport default Creators\r\n\r\n\r\n/* ------------- Initial State ------------- */\r\nexport const INITIAL_STATE = Immutable({\r\n    listFetching: false,\r\n    product_list: [],\r\n    categories: [],\r\n    errorList: null,\r\n\r\n    detailFetching: null,\r\n    productDetail: null,\r\n    errorDetail: null,\r\n\r\n    message: '',\r\n})\r\n\r\n\r\n/* ------------- Selectors ------------- */\r\nexport const ProductsSelectors = {\r\n    getProducts: state => state.products.product_list,\r\n    getCategories: state => state.products.categories,\r\n}\r\n\r\n\r\n/* ------------- Reducers ------------- */\r\n// Get products\r\nexport const getProductsRequest = (state, { payload }) => {\r\n    return state.merge({ listFetching: true, product_list: [] })\r\n}\r\n\r\nexport const getProductsSuccess = (state, { payload }) => {\r\n    return state.merge({ listFetching: false, errorList: null, product_list: payload })\r\n}\r\n\r\nexport const getProductsFail = (state, { payload }) => {\r\n    return state.merge({ listFetching: false, errorList:payload, product_list: [] })\r\n}\r\n\r\n// Get one\r\nexport const getProductDetailRequest = (state, { payload }) => {\r\n    return state.merge({ detailFetching: true, })\r\n}\r\n\r\nexport const getProductDetailSuccess = (state, { payload }) => {\r\n    return state.merge({ detailFetching: false, errorDetail: null, productDetail: payload,\r\n         tours_info: payload.tours_info})\r\n}\r\n\r\nexport const getProductDetailFail = (state, { error }) => {\r\n    return state.merge({ detailFetching: false, errorDetail: error, productDetail: null })\r\n}\r\n\r\n// Get categories\r\nexport const getCategoriesRequest = (state, { payload }) => {\r\n    return state.merge({ listFetching: true, categories: [] })\r\n}\r\n\r\nexport const getCategoriesSuccess = (state, { payload }) => {\r\n    return state.merge({ listFetching: false, errorList: null, categories: payload })\r\n}\r\n\r\nexport const getCategoriesFail = (state, { payload }) => {\r\n    return state.merge({ listFetching: false, errorList:payload, categories: [] })\r\n}\r\n\r\n\r\n/* ------------- Hookup Reducers To Types ------------- */\r\n\r\nexport const reducer = createReducer(INITIAL_STATE, {\r\n    [Types.GET_PRODUCTS_REQUEST]: getProductsRequest,\r\n    [Types.GET_PRODUCTS_SUCCESS]: getProductsSuccess,\r\n    [Types.GET_PRODUCTS_FAIL]: getProductsFail,\r\n\r\n    [Types.GET_PRODUCT_DETAIL_REQUEST]: getProductDetailRequest,\r\n    [Types.GET_PRODUCT_DETAIL_SUCCESS]: getProductDetailSuccess,\r\n    [Types.GET_PRODUCT_DETAIL_FAIL]: getProductDetailFail,\r\n\r\n    [Types.GET_CATEGORIES_REQUEST]: getCategoriesRequest,\r\n    [Types.GET_CATEGORIES_SUCCESS]: getCategoriesSuccess,\r\n    [Types.GET_CATEGORIES_FAIL]: getCategoriesFail,\r\n})\r\n","export const url = 'http://35.222.169.29';\r\n// export const url = 'http://192.168.1.6';\r\n\r\nexport const apiUrl = `${url}/api`;\r\n\r\nexport default {\r\n    JWT_AUTH: `${apiUrl}/jwt/api-token-auth/`,\r\n    JWT_CHECK_TOKEN: `${apiUrl}/jwt/api-token-verify/`,\r\n    updateUser: (id) => `${apiUrl}/profiles/${id}/`,\r\n\r\n    // products\r\n    GET_PRODUCTS: `${apiUrl}/products/`,\r\n    getProductDetail: (id) => `${apiUrl}/products/${id}/`,\r\n    addProductImage: (id) => `${apiUrl}/products/${id}/add_image/`,\r\n    deleteProductImage: (id) => `${apiUrl}/products/${id}/delete_image/`,\r\n\r\n    // shops\r\n    GET_SHOPS: `${apiUrl}/shops/`,\r\n    getShopDetail: (id) => `${apiUrl}/shops/${id}/`,\r\n    updateShop: (id) => `${apiUrl}/shops/${id}/`,\r\n    likeShop: (id) => `${apiUrl}/shops/${id}/like/`,\r\n\r\n    // categories\r\n    GET_CATEGORIES: `${apiUrl}/categories/`,\r\n\r\n    // feedbacks\r\n    FEEDBACKS: `${apiUrl}/feedbacks/`,\r\n    feedback: (id) => `${apiUrl}/feedbacks/${id}/`,\r\n}","\n// standart serializer field error. There are could be several fields\n// {\n//     \"birth_id\": [\"This field is required.\"]\n// }\n\n\nexport const parseErrorData = (error) => {\n\n    if (error && typeof error.response !== 'undefined') {\n        let errorObj = {\n            status: error.response.status, \n            statusText: error.response.statusText,\n            message: null,\n            response: error.response,\n        }\n        if ('message' in error.response.data) {\n            errorObj.message = JSON.stringify(error.response.data.message)\n        }\n        else {\n            let message = ''\n            for (const property in error.response.data) {\n                message = message + `${property}: ${error.response.data[property]}. `\n              }\n            errorObj.message = message\n\n        }\n        return errorObj\n\n    } else {\n        return { \n         status: 'Connection Error',\n         statusText: 'An error occurred while sending your data!',\n         message: 'An error occurred while sending your data!' }\n    }\n}\n\nexport const createUrlParamsFromFilters = (filters) => {\n    const params = new URLSearchParams()\n\n    if (filters != null) Object.keys(filters).forEach(key => {\n            if (filters[key] !== null && !(filters[key] instanceof Array)) \n                params.append(key, filters[key])\n            if (filters[key] !== null && filters[key] instanceof Array){\n                delete params[key]\n                filters[key].map(value => {\n                    if (value !== '')\n                        params.append(key, value)\n                    return null\n                })\n            }\n        })\n    return params\n}","import axios from 'axios';\nimport endpoints from './endpoints';\nimport { parseErrorData, createUrlParamsFromFilters } from './utils';\n\n\nconst create = () => {\n  const logIn = payload => {\n    const { username, password } = payload;\n    const url = endpoints.JWT_AUTH;\n\n    const formData = new FormData();\n    formData.append(\"username\", username);\n    formData.append(\"password\", password);\n\n    return axios({\n          method: 'post',\n          url: url,\n          data: formData,\n          headers: { 'content-type': 'multipart/form-data', }\n    })\n    .then(response => {\n        localStorage.setItem('token', response.data.token);\n        return response.data\n    })\n    .catch(err => {\n      const error = new Error(err);\n      error.data = parseErrorData(err);\n      throw error;\n    })\n    }\n\n  const logOut = () => {\n    localStorage.removeItem('token');\n  }\n\n  const checkToken = (payload: string) => {\n    return axios.post(endpoints.JWT_CHECK_TOKEN, { token: payload })\n      .then(response => {\n        localStorage.setItem('token', response.data.token);\n        return response.data\n      })\n      .catch(err => {\n        const error = new Error(err);\n            error.data = parseErrorData(err);\n            throw error;\n      })\n  }\n\n  const partialUpdateUser = payload => {\n    const { id, nickname } = payload;\n    const token = localStorage.getItem('token') || '';\n    const url = endpoints.updateUser(id);\n\n    const formData = new FormData();\n    nickname && formData.append(\"nickname\", nickname);\n\n    return axios({\n                method: 'patch',\n                url: url,\n                data: formData,\n                headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\n    })\n    .then(response => {\n        return response.data\n    })\n    .catch(err => {\n        const error = new Error(err);\n        error.data = parseErrorData(err);\n        throw error;\n    })\n}\n\n  return {\n    logIn,\n    checkToken,\n    logOut,\n    partialUpdateUser\n  }\n}\n\nexport default {\n  create\n}","import axios from 'axios';\r\nimport endpoints from './endpoints';\r\nimport { parseErrorData, createUrlParamsFromFilters } from './utils';\r\n\r\nconst create = () => {\r\n\r\n    const getCategories = (filters) => {\r\n        const params = createUrlParamsFromFilters(filters);\r\n        return axios.get(endpoints.GET_CATEGORIES, { params })\r\n        .then(response => response.data)\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const getProducts = (filters) => {\r\n        const params = createUrlParamsFromFilters(filters);\r\n        return axios.get(endpoints.GET_PRODUCTS, { params })\r\n        .then(response => response.data)\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const getProductDetail = id => {\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.getProductDetail(id);\r\n\r\n        return axios({\r\n                    method: 'get',\r\n                    url: url,\r\n                    // headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const createProduct = payload => {\r\n        const { title, price, description, category } = payload;\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.GET_PRODUCTS;\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"title\", title);\r\n        formData.append(\"price\", price);\r\n        formData.append(\"category\", category);\r\n        description && formData.append(\"description\", description);\r\n        \r\n        return axios({\r\n                    method: 'post',\r\n                    url: url,\r\n                    data: formData,\r\n                    headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const partialUpdateProduct = payload => {\r\n        const { id, title, description, price, category, active } = payload;\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.getProductDetail(id);\r\n\r\n        const formData = new FormData();\r\n        title && formData.append(\"title\", title);\r\n        description && formData.append(\"description\", description);\r\n        price && formData.append(\"price\", price);\r\n        category && formData.append(\"category\", category);\r\n        active && formData.append(\"active\", active);\r\n        \r\n        return axios({\r\n                    method: 'patch',\r\n                    url: url,\r\n                    data: formData,\r\n                    headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const deleteProduct = id => {\r\n        // const { id } = payload;\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.getProductDetail(id);\r\n\r\n        return axios({\r\n                    method: 'delete',\r\n                    url: url,\r\n                    headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const addProductImage = payload => {\r\n        const { id, original } = payload;\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.addProductImage(id);\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"original\", original);\r\n        \r\n        return axios({\r\n                    method: 'post',\r\n                    url: url,\r\n                    data: formData,\r\n                    headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const deleteProductImage = payload => {\r\n        const { id, image } = payload;\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.deleteProductImage(id);\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"image\", image);\r\n        \r\n        return axios({\r\n                    method: 'post',\r\n                    url: url,\r\n                    data: formData,\r\n                    headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    return {\r\n        getProducts,\r\n        getProductDetail,\r\n        getCategories,\r\n        createProduct,\r\n        partialUpdateProduct,\r\n        deleteProduct,\r\n        addProductImage,\r\n        deleteProductImage\r\n    }\r\n}\r\n\r\nexport default {\r\n    create\r\n}","import axios from 'axios';\r\nimport endpoints from './endpoints';\r\nimport { parseErrorData, createUrlParamsFromFilters } from './utils';\r\n\r\nconst create = () => {\r\n\r\n    const getShops = (filters) => {\r\n        const params = createUrlParamsFromFilters(filters);\r\n        return axios.get(endpoints.GET_SHOPS, { params })\r\n        .then(response => response.data)\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const getShopDetail = id => {\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.getShopDetail(id);\r\n\r\n        return axios({\r\n                    method: 'get',\r\n                    url: url,\r\n                    // headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const createShop = payload => {\r\n        const { name, phone, description, delivery, profile_id } = payload;\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.GET_SHOPS;\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"name\", name);\r\n        formData.append(\"phone\", phone);\r\n        formData.append(\"profile\", profile_id);\r\n        description && formData.append(\"description\", description);\r\n        delivery && formData.append(\"delivery\", delivery);\r\n        \r\n        return axios({\r\n                    method: 'post',\r\n                    url: url,\r\n                    data: formData,\r\n                    headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const updateShop = payload => {\r\n        const { id, name, description, delivery, phone } = payload;\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.updateShop(id);\r\n    \r\n        const formData = new FormData();\r\n        name && formData.append(\"name\", name);\r\n        description && formData.append(\"description\", description);\r\n        phone && formData.append(\"phone\", phone);\r\n        delivery && formData.append(\"delivery\", delivery);\r\n    \r\n        return axios({\r\n                    method: 'patch',\r\n                    url: url,\r\n                    data: formData,\r\n                    headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const likeShop = id => {\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.likeShop(id);\r\n        console.log('id', id)\r\n        return axios({\r\n                    method: 'post',\r\n                    url: url,\r\n                    headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    return {\r\n        getShops,\r\n        getShopDetail,\r\n        createShop,\r\n        updateShop,\r\n        likeShop\r\n    }\r\n}\r\n\r\nexport default {\r\n    create\r\n}","import axios from 'axios';\r\nimport endpoints from './endpoints';\r\nimport { parseErrorData, createUrlParamsFromFilters } from './utils';\r\n\r\nconst create = () => {\r\n\r\n    const getFeedbacks = (filters) => {\r\n        const params = createUrlParamsFromFilters(filters);\r\n        return axios.get(endpoints.FEEDBACKS, { params })\r\n        .then(response => response.data)\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const createFeedback = payload => {\r\n        const { shop, rel_feedback, text } = payload;\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.FEEDBACKS;\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"text\", text);\r\n        shop && formData.append(\"shop\", shop);\r\n        rel_feedback && formData.append(\"rel_feedback\", rel_feedback);\r\n        \r\n        return axios({\r\n                    method: 'post',\r\n                    url: url,\r\n                    data: formData,\r\n                    headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const updateFeedback = payload => {\r\n        const { id, text } = payload;\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.feedback(id);\r\n    \r\n        const formData = new FormData();\r\n        text && formData.append(\"text\", text);\r\n    \r\n        return axios({\r\n                    method: 'patch',\r\n                    url: url,\r\n                    data: formData,\r\n                    headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    const deleteFeedback = id => {\r\n        const token = localStorage.getItem('token') || '';\r\n        const url = endpoints.feedback(id);\r\n\r\n        return axios({\r\n                    method: 'delete',\r\n                    url: url,\r\n                    headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n        })\r\n        .then(response => {\r\n            return response.data\r\n        })\r\n        .catch(err => {\r\n            const error = new Error(err);\r\n            error.data = parseErrorData(err);\r\n            throw error;\r\n        })\r\n    }\r\n\r\n    return {\r\n        getFeedbacks,\r\n        createFeedback,\r\n        updateFeedback,\r\n        deleteFeedback\r\n    }\r\n}\r\n\r\nexport default {\r\n    create\r\n}","import { put, call } from 'redux-saga/effects';\r\n\r\nimport AuthActions from '../redux-sauce/auth'\r\nimport ShopsActions from '../redux-sauce/shops'\r\n\r\n\r\nexport function * logIn (api, action) {\r\n  try {\r\n    let response = yield call(api.logIn, action.payload)\r\n    yield put(AuthActions.loginSuccess(response))\r\n\r\n  } catch (e) {\r\n    yield put(AuthActions.loginFailure(e.message))\r\n    // yield put(Notifications.error({ title: 'Ошибка', message: e.message, position: 'tc' }));\r\n  }\r\n}\r\n\r\nexport function * logOut (api, action) {\r\n  try {\r\n    yield call(api.logOut)\r\n    yield put(AuthActions.logoutSuccess())\r\n  } catch (e) {\r\n    yield put(AuthActions.logoutFailure(e.message))\r\n    // yield put(Notifications.error({ title: 'Ошибка', message: e.message, position: 'tc' }));\r\n  }\r\n}\r\n\r\nexport function* checkToken(api, action) {\r\n  const { payload } = action;\r\n  try {\r\n    let response = yield call(api.checkToken, payload);\r\n    yield put(AuthActions.checkTokenSuccess(response));\r\n    yield put(ShopsActions.getShopOwnSuccess(response.shop));\r\n  } catch (e) {\r\n    yield put(AuthActions.checkTokenFail(e.message))\r\n  }\r\n}\r\n\r\nexport function* partialUpdateUser(api, action) {\r\n  try {\r\n      let response = yield call(api.partialUpdateUser, action.payload);\r\n      yield put(AuthActions.partialUpdateUserSuccess(response));\r\n  } catch (err) {\r\n      yield put(AuthActions.partialUpdateUserFail(err))\r\n  }\r\n}","import { put, call } from 'redux-saga/effects';\r\n\r\nimport ProductsActions from '../redux-sauce/products'\r\n\r\nexport function* getProducts(api, action) {\r\n    try {\r\n        let response = yield call(api.getProducts, action.payload);\r\n        yield put(ProductsActions.getProductsSuccess(response.results));\r\n    } catch (err) {\r\n        yield put(ProductsActions.getProductsFail(err))\r\n    }\r\n}\r\n\r\nexport function* getProductDetail(api, action) {\r\n    try {\r\n        let response = yield call(api.getProductDetail, action.payload);\r\n        yield put(ProductsActions.getProductDetailSuccess(response));\r\n    } catch (err) {\r\n        yield put(ProductsActions.getProductDetailFail(err))\r\n    }\r\n}\r\n\r\nexport function* getCategories(api, action) {\r\n    try {\r\n        let response = yield call(api.getCategories, action.payload);\r\n        yield put(ProductsActions.getCategoriesSuccess(response.results));\r\n    } catch (err) {\r\n        yield put(ProductsActions.getCategoriesFail(err))\r\n    }\r\n}","import { put, call } from 'redux-saga/effects';\r\n\r\nimport ShopsActions from '../redux-sauce/shops'\r\nimport AuthActions from '../redux-sauce/auth'\r\n\r\nexport function* getShops(api, action) {\r\n    try {\r\n        let response = yield call(api.getShops, action.payload);\r\n        yield put(ShopsActions.getShopsSuccess(response.results));\r\n    } catch (err) {\r\n        yield put(ShopsActions.getShopsFail(err))\r\n    }\r\n}\r\n\r\nexport function* getShopDetail(api, action) {\r\n    try {\r\n        let response = yield call(api.getShopDetail, action.payload);\r\n        yield put(ShopsActions.getShopDetailSuccess(response));\r\n    } catch (err) {\r\n        yield put(ShopsActions.getShopDetailFail(err))\r\n    }\r\n}\r\n\r\nexport function* createShop(api, action) {\r\n    try {\r\n        let response = yield call(api.createShop, action.payload);\r\n        yield put(ShopsActions.createShopSuccess(response));\r\n        yield put(AuthActions.partialUpdateUserSuccess(response));\r\n    } catch (err) {\r\n        yield put(ShopsActions.createShopFail(err))\r\n    }\r\n}\r\n\r\nexport function* updateShop(api, action) {\r\n    try {\r\n        let response = yield call(api.updateShop, action.payload);\r\n        yield put(ShopsActions.updateShopSuccess(response));\r\n    } catch (err) {\r\n        yield put(ShopsActions.updateShopFail(err))\r\n    }\r\n}\r\n\r\nexport function* createProduct(api, action) {\r\n    try {\r\n        let response = yield call(api.createProduct, action.payload);\r\n        yield put(ShopsActions.createProductSuccess(response));\r\n    } catch (err) {\r\n        yield put(ShopsActions.createProductFail(err))\r\n    }\r\n}\r\n\r\nexport function* partialUpdateProduct(api, action) {\r\n    try {\r\n        let response = yield call(api.partialUpdateProduct, action.payload);\r\n        yield put(ShopsActions.partialUpdateProductSuccess(response));\r\n    } catch (err) {\r\n        yield put(ShopsActions.partialUpdateProductFail(err))\r\n    }\r\n}\r\n\r\nexport function* deleteProduct(api, action) {\r\n    try {\r\n        let response = yield call(api.deleteProduct, action.payload);\r\n        yield put(ShopsActions.deleteProductSuccess(response));\r\n    } catch (err) {\r\n        yield put(ShopsActions.deleteProductFail(err))\r\n    }\r\n}\r\n\r\nexport function* addProductImage(api, action) {\r\n    try {\r\n        let response = yield call(api.addProductImage, action.payload);\r\n        yield put(ShopsActions.addProductImageSuccess(response));\r\n    } catch (err) {\r\n        yield put(ShopsActions.addProductImageFail(err))\r\n    }\r\n}\r\n\r\nexport function* deleteProductImage(api, action) {\r\n    try {\r\n        let response = yield call(api.deleteProductImage, action.payload);\r\n        yield put(ShopsActions.deleteProductImageSuccess(response));\r\n    } catch (err) {\r\n        yield put(ShopsActions.deleteProductImageFail(err))\r\n    }\r\n}\r\n\r\nexport function* likeShop(api, action) {\r\n    try {\r\n        let response = yield call(api.likeShop, action.payload);\r\n        yield put(ShopsActions.likeShopSuccess(response));\r\n    } catch (err) {\r\n        yield put(ShopsActions.likeShopFail(err))\r\n    }\r\n}","import { put, call } from 'redux-saga/effects';\r\n\r\nimport FeedbacksActions from '../redux-sauce/feedbacks'\r\nimport ShopsActions from '../redux-sauce/shops'\r\n\r\nexport function* getFeedbacks(api, action) {\r\n    try {\r\n        let response = yield call(api.getFeedbacks, action.payload);\r\n        yield put(FeedbacksActions.getFeedbacksSuccess(response.results));\r\n    } catch (err) {\r\n        yield put(FeedbacksActions.getFeedbacksFail(err))\r\n    }\r\n}\r\n\r\nexport function* createFeedback(api, action) {\r\n    try {\r\n        let response = yield call(api.createFeedback, action.payload);\r\n        yield put(FeedbacksActions.createFeedbackSuccess(response));\r\n        if (response.feedback.shop)\r\n            yield put(ShopsActions.addToFeedbacksList(response.feedback.profile));\r\n    } catch (err) {\r\n        yield put(FeedbacksActions.createFeedbackFail(err))\r\n    }\r\n}\r\n\r\nexport function* updateFeedback(api, action) {\r\n    try {\r\n        let response = yield call(api.updateFeedback, action.payload);\r\n        yield put(FeedbacksActions.updateFeedbackSuccess(response));\r\n    } catch (err) {\r\n        yield put(FeedbacksActions.updateFeedbackFail(err))\r\n    }\r\n}\r\n\r\nexport function* deleteFeedback(api, action) {\r\n    try {\r\n        let response = yield call(api.deleteFeedback, action.payload);\r\n        yield put(FeedbacksActions.deleteFeedbackSuccess(response));\r\n        if (response.shop)\r\n            yield put(ShopsActions.removeFromFeedbacksList(response.profile));\r\n    } catch (err) {\r\n        yield put(FeedbacksActions.deleteFeedbackFail(err))\r\n    }\r\n}","import { takeEvery, all, takeLatest } from \"redux-saga/effects\";\r\n\r\n/* -------------- API -------------- */\r\nimport AuthApi from \"../api/authApi\";\r\nimport ProductsApi from '../api/productsApi';\r\nimport ShopsApi from '../api/shopsApi';\r\nimport FeedbacksApi from '../api/feedbacksApi';\r\n\r\n/* ------------- Types ------------- */\r\nimport { AuthTypes } from \"../redux-sauce/auth\";\r\nimport { ProductsTypes } from '../redux-sauce/products';\r\nimport { ShopsTypes } from '../redux-sauce/shops';\r\nimport { FeedbacksTypes } from '../redux-sauce/feedbacks';\r\n\r\n/* ------------- Sagas ------------- */\r\nimport { logIn, logOut, checkToken, partialUpdateUser } from \"./authSagas\";\r\nimport * as productsSaga from './productsSagas';\r\nimport * as shopsSaga from './shopsSagas';\r\nimport * as feedbacksSaga from './feedbacksSagas';\r\n\r\nconst authApi = AuthApi.create();\r\nconst productsApi = ProductsApi.create();\r\nconst shopsApi = ShopsApi.create();\r\nconst feedbacksApi = FeedbacksApi.create();\r\n\r\nexport default function* root() {\r\n  yield all([\r\n    takeEvery(AuthTypes.LOGIN_REQUEST, logIn, authApi),\r\n    takeEvery(AuthTypes.LOGOUT_REQUEST, logOut, authApi),\r\n    takeEvery(AuthTypes.CHECK_TOKEN_REQUEST, checkToken, authApi),\r\n    takeEvery(AuthTypes.PARTIAL_UPDATE_USER_REQUEST, partialUpdateUser, authApi),\r\n\r\n    takeEvery(ProductsTypes.GET_PRODUCTS_REQUEST, productsSaga.getProducts, productsApi),\r\n    takeEvery(ProductsTypes.GET_PRODUCT_DETAIL_REQUEST, productsSaga.getProductDetail, productsApi),\r\n    takeEvery(ProductsTypes.GET_CATEGORIES_REQUEST, productsSaga.getCategories, productsApi),\r\n\r\n    takeEvery(ShopsTypes.GET_SHOPS_REQUEST, shopsSaga.getShops, shopsApi),\r\n    takeEvery(ShopsTypes.GET_SHOP_DETAIL_REQUEST, shopsSaga.getShopDetail, shopsApi),\r\n    takeEvery(ShopsTypes.CREATE_SHOP_REQUEST, shopsSaga.createShop, shopsApi),\r\n    takeEvery(ShopsTypes.UPDATE_SHOP_REQUEST, shopsSaga.updateShop, shopsApi),\r\n    takeEvery(ShopsTypes.LIKE_SHOP_REQUEST, shopsSaga.likeShop, shopsApi),\r\n\r\n    takeEvery(ShopsTypes.CREATE_PRODUCT_REQUEST, shopsSaga.createProduct, productsApi),\r\n    takeEvery(ShopsTypes.PARTIAL_UPDATE_PRODUCT_REQUEST, shopsSaga.partialUpdateProduct, productsApi),\r\n    takeEvery(ShopsTypes.DELETE_PRODUCT_REQUEST, shopsSaga.deleteProduct, productsApi),\r\n    takeEvery(ShopsTypes.ADD_PRODUCT_IMAGE_REQUEST, shopsSaga.addProductImage, productsApi),\r\n    takeEvery(ShopsTypes.DELETE_PRODUCT_IMAGE_REQUEST, shopsSaga.deleteProductImage, productsApi),\r\n\r\n    takeEvery(FeedbacksTypes.GET_FEEDBACKS_REQUEST, feedbacksSaga.getFeedbacks, feedbacksApi),\r\n    takeEvery(FeedbacksTypes.CREATE_FEEDBACK_REQUEST, feedbacksSaga.createFeedback, feedbacksApi),\r\n    takeEvery(FeedbacksTypes.UPDATE_FEEDBACK_REQUEST, feedbacksSaga.updateFeedback, feedbacksApi),\r\n    takeEvery(FeedbacksTypes.DELETE_FEEDBACK_REQUEST, feedbacksSaga.deleteFeedback, feedbacksApi),\r\n  ]);\r\n}\r\n","import { createStore, applyMiddleware, combineReducers } from 'redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\n// import { routerMiddleware, routerReducer } from 'react-router-redux'\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport rootSaga from '../sagas';\r\n// import { reducer as notifications } from 'react-notification-system-redux';\r\nimport { reducer as formReducer } from 'redux-form';\r\n\r\nexport const reducers = combineReducers({\r\n  auth: require('../redux-sauce/auth').reducer,\r\n  products: require('../redux-sauce/products').reducer,\r\n  shops: require('../redux-sauce/shops').reducer,\r\n  feedbacks: require('../redux-sauce/feedbacks').reducer,\r\n  \r\n  form: formReducer,\r\n  // notifications: notifications\r\n})\r\n\r\nexport default (history) => {\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  const store = createStore(reducers, composeWithDevTools(\r\n    applyMiddleware(sagaMiddleware)\r\n  ));\r\n\r\n  let sagasManager = sagaMiddleware.run(rootSaga)\r\n\r\n  if (module.hot) {\r\n    module.hot.accept(() => {\r\n      const nextRootReducer = require('./').reducers\r\n      store.replaceReducer(nextRootReducer)\r\n\r\n      const newYieldedSagas = require('../sagas').default\r\n      sagasManager.cancel()\r\n      sagasManager.done.then(() => {\r\n        sagasManager = sagaMiddleware.run(newYieldedSagas)\r\n      })\r\n    })\r\n  }\r\n\r\n  return store\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useHistory, useParams, Link } from 'react-router-dom'\r\nimport { url } from '../redux/api/endpoints';\r\nimport { Helmet } from 'react-helmet';\r\n\r\n// actions\r\nimport ProductsActions from '../redux/redux-sauce/products';\r\nimport ShopsActions from '../redux/redux-sauce/shops';\r\n\r\n// import Background from '../../../images/icons/6.png';\r\n\r\n\r\nexport function CatButtonComp (props) {\r\n  const { cat, className, handleClick } = props\r\n\r\n  return (\r\n    <button \r\n      className={className}\r\n      key={cat.id} onClick={handleClick} \r\n      data-id={cat.id}\r\n      >\r\n        {cat.ru_name} \r\n        {cat.images.length > 0 && <img style={{'width': '25px'}} \r\n          src={'http://35.222.169.29/' + cat.images[0].catalog_image} />}\r\n    </button>\r\n  )\r\n}\r\n\r\nfunction CatButton(props) {\r\n  let history = useHistory();\r\n  const { catName } = useParams();\r\n  const { cat } = props\r\n\r\n  if (!catName){\r\n    history.push(\"/dm/categories/\" + cat.name);\r\n  }\r\n\r\n  const className = \r\n    'btn btn-xs mb-1 ml-1 rounded-xl font-500 shadow-s text-wrap float-left'\r\n\r\n  const classActive = catName == cat.name \r\n    ? className + ' bg-magenta2-light' \r\n    : className + ' ' \r\n\r\n  function handleClick() {\r\n    history.push(\"/dm/categories/\" + cat.name);\r\n    props.getShops({category: cat.name})\r\n  }\r\n\r\n  return (\r\n    <CatButtonComp\r\n      className={classActive}\r\n      cat={cat} \r\n      handleClick={handleClick} \r\n    />\r\n  );\r\n}\r\n\r\nfunction ShopsList(props) {\r\n  const { catName } = useParams();\r\n  const { shop_list, listFetching, errorList } = props\r\n\r\n  if (catName && shop_list.length <= 0 && !listFetching && !errorList) {\r\n    props.getShops({category: catName})\r\n  }\r\n\r\n  return (\r\n    !listFetching && shop_list && shop_list.length > 0 && shop_list.map(shop => \r\n      <Link to={'/dm/shops/' + shop.id + '/products/' + catName}>\r\n        <div className='card card-style mx-1 mb-2 pb-2 px-1'>\r\n          <div className='content mb-0'>\r\n            <h5 className='font-17 float-left'>{shop.name}</h5>\r\n            <p className='float-right'>\r\n              <i className=\"fas fa-heart color-red2-light font-20\" aria-hidden=\"true\">\r\n                <sup className='font-700'>{shop.likes_list.length}</sup>\r\n              </i>\r\n              <i className=\"far fa-comments ml-3 font-20\" aria-hidden=\"true\">\r\n                <sup className='font-700'>{shop.feedbacks_list.length} </sup>\r\n              </i> \r\n            </p>\r\n          </div>\r\n          <div className='content mt-0 mb-1'>\r\n            {/* <p className='my-1'>\r\n              {shop.description}\r\n            </p> */}\r\n            <div className='' style={{'line-height': '15px'}}>\r\n              {shop.category_products && shop.category_products.length > 0 && shop.category_products.map(product => \r\n                <div className='item-product'>\r\n                    <p className='item-product-title'>{product.title} - {product.price}</p>\r\n                </div>\r\n                )}\r\n            </div>\r\n          </div>\r\n          <div className='content mt-1'>\r\n            {shop.category_products && \r\n                <img src={url + shop.category_images[0]} className='rounded-s shop-list-img'\r\n                />\r\n              } \r\n          </div>\r\n        </div>\r\n      </Link>\r\n    )\r\n  );\r\n}\r\n\r\nclass Main extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.getCategories()\r\n  }\r\n\r\n  render() {\r\n    const { categories } = this.props.state.products\r\n    const { shop_list, listFetching, errorList } = this.props.state.shops\r\n\r\n    return (\r\n      <div>\r\n        <Helmet>\r\n          <title>Ed Sheeran</title>\r\n          <meta property=\"og:title\" content=\"I see fire\"/>\r\n          <meta property=\"og:description\" content=\"inside a mountains\" /> \r\n          <meta property=\"og:image\" content={`/images/products/3.png`} />\r\n          <meta property=\"theme-color\" content=\"#008f68\" />\r\n        </Helmet>\r\n        {/* <meta property={{”og:image” content=”/small-im.png” /> */}\r\n        <div className='card card-style rounded-m mx-1 my-1 pl-0 cats-block ' \r\n          >\r\n          <div className='content my-2 mx-1'>\r\n            {categories && categories.map(cat =>\r\n              <CatButton cat={cat} getShops={this.props.getShops}/>\r\n            )}\r\n          </div>\r\n          <div className='clearfix'></div>\r\n        </div>\r\n\r\n        <ShopsList shop_list={shop_list} listFetching={listFetching} getShops={this.props.getShops}\r\n          errorList={errorList}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  notifications: state.notifications,\r\n  state: state\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getCategories: query => dispatch(ProductsActions.getCategoriesRequest(query)),\r\n  getShops: query => dispatch(ShopsActions.getShopsRequest(query)),\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Main);\r\n","import React, { Component, useState  } from 'react';\r\nimport { Field, reduxForm } from 'redux-form'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Select from '@material-ui/core/Select'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\n\r\n\r\nexport const renderFromHelper = ({ touched, error }) => {\r\n  if (!(touched && error)) {\r\n    return\r\n  } else {\r\n    return <FormHelperText>{touched && error}</FormHelperText>\r\n  }\r\n}\r\n\r\nexport const renderTextField = ({\r\n  label,\r\n  placeholder,\r\n  input,\r\n  multiline,\r\n  meta: { touched, invalid, error },\r\n  labelClass,\r\n  ...custom\r\n}) => (\r\n  <TextField\r\n    label={label}\r\n    placeholder={placeholder}\r\n    error={touched && invalid}\r\n    helperText={touched && error}\r\n    {...input}\r\n    {...custom}\r\n    multiline={multiline}\r\n    InputLabelProps={{\r\n      className: labelClass,\r\n    }}\r\n  />\r\n)\r\n\r\nexport const renderSelectField = ({\r\n  input,\r\n  label,\r\n  formClass,\r\n  labelClass,\r\n  meta: { touched, error },\r\n  children,\r\n  ...custom\r\n}) => (\r\n  <FormControl error={touched && error} className={formClass}>\r\n    <InputLabel className={labelClass}>{label}</InputLabel>\r\n    <Select\r\n      {...input}\r\n      {...custom}\r\n    >\r\n      {children}\r\n    </Select>\r\n    {renderFromHelper({ touched, error })}\r\n  </FormControl>\r\n)\r\n\r\nexport const renderDateTimeField = ({\r\n  label,\r\n  placeholder,\r\n  input,\r\n  meta: { touched, invalid, error },\r\n  labelClass,\r\n  ...custom\r\n}) => (\r\n\r\n  <TextField\r\n    label={label}\r\n    type=\"date\"\r\n    error={touched && invalid}\r\n    helperText={touched && error}\r\n    {...input}\r\n    {...custom}\r\n    InputLabelProps={{\r\n      className: labelClass,\r\n      shrink: true \r\n    }}\r\n  />\r\n)\r\n\r\nconst validateShopForm = values => {\r\n  const errors = {}\r\n  const requiredFields = [\r\n    'name',\r\n    'phone',\r\n  ]\r\n  requiredFields.forEach(field => {\r\n    if (!values[field]) {\r\n      errors[field] = 'Обязательное поле'\r\n    }\r\n  })\r\n  return errors\r\n}\r\n\r\nfunction ShopForm (props) {\r\n  const [delEnabled, setDel] = useState(false);\r\n\r\n  return (\r\n    <div>\r\n      <Field\r\n          component={renderTextField}\r\n          name=\"name\"\r\n          label='Название магазина'\r\n          className='input-group my-2'\r\n          labelClass='font-12'\r\n        />\r\n      \r\n      <Field\r\n          component={renderTextField}\r\n          name=\"phone\"\r\n          label='Телефон'\r\n          className='input-group my-2'\r\n          labelClass='font-12'\r\n        />\r\n      \r\n      {delEnabled \r\n        ? <Field name=\"delivery\" component=\"textarea\" className=\"form-control font-12 my-2\"\r\n            style={{\"height\": \"150px\"}} label='Доставка'\r\n            placeholder='Напишите как у вас с доставкой.\r\n            '\r\n            />\r\n        : <button className='btn btn-m mb-1 rounded-s text-uppercase font-900 shadow-s\r\n        bg-blue2 text-wrap' onClick={() => setDel(!delEnabled)}>Доставка?</button>\r\n      }\r\n\r\n      <Field name=\"description\" component=\"textarea\" className=\"form-control font-12 my-2\"\r\n          style={{\"height\": \"150px\"}} label='Доп. информация(необязательно)'\r\n          placeholder='Какую работу нужно сделать? \r\n          - Напишите список работ.\r\n          - Укажите объем работы в квадратных метрах, штуках или в другой подходящей единице измерения.\r\n          - Опишите ваши пожелания и требования, если они есть.\r\n          '\r\n          />\r\n      <Field\r\n        component={renderTextField}\r\n        name=\"profile_id\"\r\n        hidden={true}\r\n      />\r\n      <Field\r\n        component={renderTextField}\r\n        name=\"id\"\r\n        hidden={true}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function InitShopForm (props) {\r\n  const { parentSubmit, pristine, reset, submitting, handleSubmit, initialValues } = props\r\n  return (\r\n    <div className='card card-style mx-0 mb-1 mt-2'>\r\n      <div className='content'>\r\n        <form onSubmit={handleSubmit(parentSubmit)}>\r\n          <ShopForm initialValues={initialValues}/>\r\n          <button \r\n            className='btn btn-m mb-1 rounded-s text-uppercase font-900 shadow-s\r\n            bg-blue2 text-wrap'\r\n            type=\"submit\"\r\n            disabled={pristine || submitting}>\r\n            Далее\r\n          </button>\r\n          \r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nInitShopForm = reduxForm({\r\n  form: 'initShopForm',\r\n  validate: validateShopForm,\r\n})(InitShopForm)\r\n\r\n\r\nexport function EditShopForm (props) {\r\n  const { parentSubmit, pristine, reset, submitting, handleSubmit, initialValues } = props\r\n\r\n  function submitAndClose(){\r\n    props.setEdit(false)\r\n    parentSubmit()\r\n  }\r\n\r\n  return (\r\n    <div className='card card-style mx-0 mb-1 mt-2'>\r\n      <div className='content'>\r\n        <form onSubmit={handleSubmit(submitAndClose)}>\r\n          <ShopForm initialValues={initialValues} phone={false}/>\r\n          <button \r\n            className='btn btn-m mb-1 rounded-s text-uppercase font-900 shadow-s\r\n            bg-blue2 text-wrap'\r\n            type=\"submit\"\r\n            disabled={pristine || submitting}>\r\n            Сохранить\r\n          </button>\r\n          <button \r\n            className='btn btn-m mb-1 rounded-s text-uppercase font-900 shadow-s\r\n            bg-blue2 text-wrap'\r\n            onClick={() => props.setEdit(false)}\r\n            >\r\n            Назад\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nEditShopForm = reduxForm({\r\n  form: 'editShopForm',\r\n  validate: validateShopForm,\r\n})(EditShopForm)\r\n\r\n\r\nexport function FeedbackCreateForm (props) {\r\n  const { parentSubmit, pristine, reset, submitting, handleSubmit, initialValues } = props\r\n\r\n  return (\r\n    <div className='card card-style mx-0 mb-1 mt-2'>\r\n      <div className='content'>\r\n        <p className='mb-0'>Оставить  отзыв</p>\r\n        <form onSubmit={handleSubmit(parentSubmit)}>\r\n        <div>\r\n          <Field name=\"text\" component=\"textarea\" className=\"form-control font-12 my-2\"\r\n            style={{\"height\": \"150px\"}} label='Текст'\r\n            />\r\n          <Field\r\n            component='number'\r\n            name=\"shop\"\r\n            hidden={true}\r\n          />\r\n        </div>\r\n          <button \r\n            className='btn btn-m mb-1 rounded-s text-uppercase font-900 shadow-s\r\n            bg-blue2 text-wrap'\r\n            type=\"submit\"\r\n            disabled={pristine || submitting}>\r\n            Сохранить\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nFeedbackCreateForm = reduxForm({\r\n  form: 'feedbackCreateForm',\r\n  // validate: validateShopForm,\r\n})(FeedbackCreateForm)\r\n\r\nexport function FeedbackEditForm (props) {\r\n  const { parentSubmit, pristine, reset, submitting, handleSubmit, initialValues, setEditOnOff } = props\r\n  \r\n  function submitAndClose(){\r\n    setEditOnOff(false)\r\n    parentSubmit()\r\n  }\r\n\r\n  return (\r\n    <div className='card card-style mx-0 mb-1 mt-2'>\r\n      <div className='content'>\r\n        <form onSubmit={handleSubmit(submitAndClose)}>\r\n        <div>\r\n          <Field name=\"text\" component=\"textarea\" className=\"form-control font-12 my-2\"\r\n            style={{\"height\": \"150px\"}} label='Текст'\r\n            />\r\n          <Field\r\n            component='number'\r\n            name=\"id\"\r\n            hidden={true}\r\n          />\r\n        </div>\r\n          <button \r\n            className='btn btn-m mb-1 rounded-s text-uppercase font-900 shadow-s\r\n            bg-blue2 text-wrap'\r\n            type=\"submit\"\r\n            disabled={pristine || submitting}>\r\n            сохранить\r\n          </button>\r\n          <button \r\n            className='btn btn-m mb-1 rounded-s text-uppercase font-900 shadow-s\r\n            bg-blue2 text-wrap'\r\n            onClick={() => setEditOnOff(false)}\r\n          >\r\n            отмена\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nFeedbackEditForm = reduxForm({\r\n  form: 'feedbackEditForm',\r\n  // validate: validateShopForm,\r\n})(FeedbackEditForm)","import React, { Component, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet';\r\n\r\nimport { url } from '../redux/api/endpoints';\r\n// actions\r\nimport ShopActions from '../redux/redux-sauce/shops';\r\nimport FeedbacksActions from '../redux/redux-sauce/feedbacks';\r\n\r\nimport { FeedbackCreateForm, FeedbackEditForm } from '../components/ShopForms';\r\nimport { CatButtonComp } from './Main';\r\n\r\n\r\nfunction Feedback (props) {\r\n  const { feedback } = props\r\n  return (\r\n    <div className='card card-style mx-0 my-1'>\r\n      <div className='content'>\r\n        <p>{feedback.text}</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction OwnFeedback (props) {\r\n  const { feedback } = props\r\n  const [ editOnOff, setEditOnOff] = useState(false)\r\n\r\n  return (\r\n    editOnOff \r\n    ? <FeedbackEditForm \r\n       initialValues={{text: feedback.text, id: feedback.id}}\r\n       parentSubmit={props.edit}\r\n       setEditOnOff={setEditOnOff}\r\n       />\r\n    : <div className='card card-style mx-0 my-1'>\r\n        <div className='content'>\r\n          <p>{feedback.text}</p>\r\n          <button onClick={() => setEditOnOff(true)}>изменить</button>\r\n          <button onClick={() => props.delete(feedback.id)}>удалить</button>\r\n        </div>\r\n      </div>\r\n  )\r\n}\r\n\r\n\r\nfunction Feedbacks(props) {\r\n  const { shop_id, feedback_list, user_id, whoLikeList, whoFeedbackList } = props\r\n  const [ showFeed, setShowFeed ] = useState(false)\r\n   \r\n  let isLike = whoLikeList ? whoLikeList.includes(user_id) : false\r\n  let isFeedback = whoFeedbackList ? whoFeedbackList.includes(user_id) : false\r\n\r\n  const feedbackCount = whoFeedbackList ? whoFeedbackList.length : 0\r\n\r\n  function showOrCreateFeedbacks () {\r\n    props.showFeedbacks(shop_id)\r\n    setShowFeed(!showFeed)\r\n  }\r\n\r\n  function likeUnlikeShop () {\r\n    props.likeShop(shop_id)\r\n  }\r\n\r\n  return (\r\n    [\r\n      <div className='content my-1'>\r\n        <p className='float-left mr-4 border rounded-s px-1 py-1 my-1' onClick={likeUnlikeShop}>\r\n          Нравится\r\n          {isLike \r\n            ? <span className='color-yellow1-light ml-1'>\r\n                <i className=\"fas fa-heart color-red2-light\"></i> {' '}\r\n              </span>\r\n            : <span className=''>\r\n                <i className=\"far fa-heart color-red2-light ml-1\"></i> {' '}\r\n              </span>\r\n          }\r\n        </p>\r\n        <p onClick={showOrCreateFeedbacks} className='float-right border rounded-s px-2 py-1 ml-1 my-1'>\r\n          Отзывы <i className=\"far fa-comments ml-1\"></i> {feedbackCount > 0 ? feedbackCount : 0}\r\n        </p>\r\n        <div className='clearfix'></div>\r\n        {(showFeed && isFeedback) &&\r\n          <p className='my-0'>Вы уже оставляли отзыв</p>\r\n        }\r\n      </div>,\r\n\r\n      showFeed &&\r\n        !isFeedback && \r\n          <FeedbackCreateForm \r\n            initialValues={{shop: shop_id}} \r\n            parentSubmit={props.createFeedback}\r\n            addToFeedbacksList={props.addToFeedbacksList}\r\n            user_id={user_id}/>\r\n      ,\r\n\r\n      showFeed && feedback_list.length > 0 &&\r\n        <div className='content'>\r\n          {feedback_list.map(fb => \r\n            fb.profile === user_id \r\n              ? <OwnFeedback feedback={fb} edit={props.editFeedback} delete={props.deleteFeedback}/>\r\n              : <Feedback feedback={fb}/>\r\n            )}\r\n        </div>\r\n    ]\r\n  )\r\n}\r\n\r\n\r\nfunction CatButton(props) {\r\n  let history = useHistory();\r\n  const { catName, shopId } = useParams();\r\n  const { cat } = props\r\n\r\n  const className = \r\n  'btn btn-xs mb-1 ml-1 rounded-xl font-500 shadow-s text-wrap float-left'\r\n\r\n  const classActive = catName == cat.name \r\n    ? className + ' bg-red2-light' \r\n    : className + ' bg-blue1-light'\r\n\r\n  function handleClick() {\r\n    history.push(\"/dm/shops/\" + shopId + '/products/' + cat.name + '/')\r\n  }\r\n\r\n  return (\r\n    <CatButtonComp\r\n      className={classActive}\r\n      cat={cat} \r\n      handleClick={handleClick} \r\n    />\r\n  );\r\n}\r\n\r\nfunction ProductTextBody(props) {\r\n  return (\r\n    <div className='shop-product-text-body'>\r\n      <p className='font-18 my-0'>{props.product.title}</p>\r\n      <p className='my-0'>{props.product.description}</p>\r\n      <p className='my-0 font-900 font-16'>{props.product.price}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CatProductList(props) {\r\n  const { catName } = useParams();\r\n  const { products } = props\r\n  let catProducts = []\r\n\r\n  if (catName && products.length > 0) {\r\n    for (var i = 0; i < products.length; i++){\r\n      if (products[i].category === catName){\r\n        catProducts = [...catProducts, products[i]]\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    catProducts.map(product => \r\n      <div className='card card-style mb-1 mx-0 rounded-0'>\r\n        <div className='content'>\r\n          {product.images.length > 0 ? \r\n            <div className='row'>\r\n              <div className='col-8'>\r\n                <ProductTextBody product={product} />\r\n              </div>\r\n              <div className='col-4'>\r\n                  <img src={url + product.images[0].thumb_image} height='70' witdh='70'/>\r\n              </div>\r\n            </div>\r\n            :\r\n            <ProductTextBody product={product} />\r\n            }\r\n        </div>\r\n      </div>\r\n      )\r\n  )}\r\n\r\n\r\nclass ShopDetail extends Component {\r\n  constructor(props) {\r\n    super(props);  \r\n    this.state = {\r\n      catProducts: [],\r\n      active_cat: null,\r\n    }\r\n    this.createFeedback = this.createFeedback.bind(this);\r\n    this.showFeedbacks = this.showFeedbacks.bind(this);\r\n    this.editFeedback = this.editFeedback.bind(this);\r\n    \r\n  }\r\n\r\n  componentDidMount() {\r\n    const { shopId } = this.props.match.params\r\n    this.props.getShopDetail(shopId)\r\n  }\r\n\r\n  createFeedback () {\r\n    this.props.createFeedback(this.props.state.form.feedbackCreateForm.values)\r\n  }\r\n\r\n  showFeedbacks (shop_id) {\r\n    this.props.getFeedbacks({shop: shop_id})\r\n  }\r\n\r\n  editFeedback () {\r\n    this.props.updateFeedback(this.props.state.form.feedbackEditForm.values)\r\n  }\r\n\r\n  render() {\r\n    const { shopDetail } = this.props.state.shops\r\n    const { feedback_list } = this.props.state.feedbacks\r\n    const user_id  = this.props.state.auth.user ? this.props.state.auth.user.id : null\r\n    // console.log(this.props.state)\r\n    return (\r\n        shopDetail &&\r\n          <div>\r\n            <Helmet>\r\n              <title>{shopDetail.name}</title>\r\n              <meta property=\"og:title\" content={shopDetail.name}/>\r\n              <meta property=\"og:description\" content={shopDetail.description} /> \r\n              <meta property=\"og:image\" content={`/images/products/4.png`} />\r\n              <meta property=\"theme-color\" content=\"#008f68\" />\r\n          </Helmet>\r\n            <div className='card card-style my-2 mx-0 pb-2'>\r\n              <div className='content mb-1'>\r\n                <h5 className='float-left'>{shopDetail.name}</h5>\r\n                <p className='float-right mb-0'>\r\n                  <i className=\"fas fa-heart color-red2-light ml-1\" aria-hidden=\"true\"></i>\r\n                    {shopDetail.likes_list.length}\r\n                  <i className=\"far fa-comments ml-3\" aria-hidden=\"true\"></i>\r\n                    {shopDetail.feedbacks_list.length} \r\n                </p>\r\n                <div className='clearfix'></div>\r\n                \r\n                <div>\r\n                  {shopDetail.description}\r\n                </div>\r\n                \r\n                <div>\r\n                  {shopDetail.delivery}\r\n                </div>\r\n              </div>\r\n\r\n            <Feedbacks \r\n              shop_id={shopDetail.id}\r\n              user_id={user_id}\r\n\r\n              createFeedback={this.createFeedback} \r\n              showFeedbacks={this.showFeedbacks}\r\n              editFeedback={this.editFeedback}\r\n              deleteFeedback={this.props.deleteFeedback}\r\n              feedback_list={feedback_list}\r\n              whoFeedbackList={shopDetail.feedbacks_list}\r\n              addToFeedbacksList={this.props.addToFeedbacksList}\r\n\r\n              whoLikeList={shopDetail.likes_list}\r\n              likeShop={this.props.likeShop}\r\n              />\r\n            </div>\r\n            <div className='card card-style mb-1 mx-0 rounded-0'>\r\n              {shopDetail.categories.length > 1 &&\r\n                <div className='content'>\r\n                  {shopDetail.categories.map(cat => \r\n                    <CatButton cat={cat}/>\r\n                  )}\r\n                </div>\r\n              }\r\n              <div className='clearfix'></div>\r\n            </div>\r\n            <CatProductList products={shopDetail.products} />\r\n          </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  state: state,\r\n  routing: state.routing,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getShopDetail: id => dispatch(ShopActions.getShopDetailRequest(id)),\r\n  likeShop: shop_id => dispatch(ShopActions.likeShopRequest(shop_id)),\r\n\r\n  createFeedback: data => dispatch(FeedbacksActions.createFeedbackRequest(data)),\r\n  updateFeedback: data => dispatch(FeedbacksActions.updateFeedbackRequest(data)),\r\n  deleteFeedback: data => dispatch(FeedbacksActions.deleteFeedbackRequest(data)),\r\n  getFeedbacks: data => dispatch(FeedbacksActions.getFeedbacksRequest(data)),\r\n  addToFeedbacksList : user_id => dispatch(ShopActions.addToFeedbacksList(user_id)),\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ShopDetail);\r\n","import React, { Component, useState  } from 'react';\r\nimport { Field, reduxForm } from 'redux-form'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport Select from '@material-ui/core/Select'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport Radio from '@material-ui/core/Radio'\r\nimport RadioGroup from '@material-ui/core/RadioGroup'\r\n\r\nimport { SubmissionError } from 'redux-form'\r\n\r\nimport { renderFromHelper, renderTextField, renderSelectField } from './ShopForms'\r\n\r\n\r\nfunction ProductForm (props) {\r\n  const { categories } = props\r\n\r\n  return (\r\n    <div>\r\n      <Field\r\n          component={renderTextField}\r\n          name=\"title\"\r\n          label='Название'\r\n          className='input-group my-2'\r\n          labelClass='font-12'\r\n        />\r\n\r\n      <Field\r\n          component={renderTextField}\r\n          name=\"price\"\r\n          label='Цена в свободной форме'\r\n          className='input-group my-2'\r\n          labelClass='font-12'\r\n        />\r\n      \r\n      <Field \r\n          name=\"category\" \r\n          component={renderSelectField}\r\n          labelClass='font-12 '\r\n          formClass='input-group my-2'\r\n          label='Выберите категорию работ*'\r\n         >\r\n            {categories && categories.length > 0 && categories.map(category => \r\n              <option className='font-10' value={category.id} key={category.id}>{category.ru_name}</option>\r\n              )}\r\n        </Field>\r\n      \r\n      <Field \r\n        name=\"description\" \r\n        component={renderTextField} \r\n        className=\"form-control font-12 my-2 \"\r\n        style={{\"min-height\": \"150px\"}} \r\n        variant=\"outlined\"\r\n        labelClass={'font-12'}\r\n        multiline\r\n        rowsMax={6}\r\n        label='Описание(необязательно)'\r\n        />\r\n\r\n      <Field\r\n        component={renderTextField}\r\n        name=\"shop_id\"\r\n        hidden={true}\r\n      />\r\n\r\n      <Field\r\n        component={renderTextField}\r\n        name=\"id\"\r\n        hidden={true}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function CreateProductForm (props) {\r\n  const { parentSubmit, pristine, reset, submitting, handleSubmit, initialValues, categories } = props\r\n  return (\r\n    <div className='card card-style mx-1 mb-1 mt-2'>\r\n      <div className='content'>\r\n        <h3 className='font-18 font-500 text-center'>Добавить продукт</h3>\r\n        <form onSubmit={handleSubmit(parentSubmit)}>\r\n          <ProductForm initialValues={initialValues} categories={categories}/>\r\n          <button \r\n            className='btn btn-m mb-1 rounded-s text-uppercase font-900 shadow-s\r\n            bg-blue2 text-wrap'\r\n            type=\"submit\"\r\n            disabled={pristine || submitting}>\r\n            Создать\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst validateProductForm = values => {\r\n  const errors = {}\r\n  const requiredFields = [\r\n    'title',\r\n    'category',\r\n    'price'\r\n  ]\r\n  requiredFields.forEach(field => {\r\n    if (!values[field]) {\r\n      errors[field] = 'Обязательное поле'\r\n    }\r\n  })\r\n  return errors\r\n}\r\n\r\nCreateProductForm = reduxForm({\r\n  form: 'createProductForm',\r\n  validate: validateProductForm,\r\n})(CreateProductForm)\r\n\r\n\r\nexport function UpdateProductForm (props) {\r\n  const { parentSubmit, pristine, reset, submitting, handleSubmit, initialValues, categories } = props\r\n  return (\r\n    <form onSubmit={handleSubmit(parentSubmit)}>\r\n      <div className='card card-style mx-1 mb-1 mt-2'>\r\n        <div className='content mb-0'>\r\n          <ProductForm initialValues={initialValues} categories={categories}/>\r\n        </div>\r\n        <div className='content mt-1'>\r\n          <button \r\n            className='btn btn-m mb-1 rounded-s text-uppercase font-900 shadow-s\r\n            bg-blue2 text-wrap'\r\n            type=\"submit\"\r\n            disabled={pristine || submitting}>\r\n            Изменить\r\n          </button>\r\n          <button className='btn btn-m mb-1 rounded-s text-uppercase font-900 shadow-s\r\n            bg-blue2 text-wrap' onClick={props.clickEdit} data-id={null}>\r\n              Отмена\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nUpdateProductForm = reduxForm({\r\n  form: 'updateProductForm',\r\n  validate: validateProductForm,\r\n})(UpdateProductForm)","import React, { Component, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\n// actions\r\nimport ShopActions from '../redux/redux-sauce/shops';\r\nimport ProductsActions from '../redux/redux-sauce/products';\r\n\r\n// form\r\nimport { InitShopForm, EditShopForm } from '../components/ShopForms';\r\nimport { CreateProductForm, UpdateProductForm } from '../components/ProductForms';\r\n\r\n\r\nfunction ProductContent (props) {\r\n  const { product } = props\r\n\r\n  let btnClass = 'btn btn-s mb-1 mx-1 rounded-s text-uppercase font-500 font-13 shadow-s \\\r\n     bg-blue2 text-wrap'\r\n\r\n  return(\r\n    [\r\n      <div className='content mb-0' key={1}>\r\n        <p>{product.title}</p>\r\n        <p>{product.price}</p>\r\n        <p>{product.description}</p>\r\n        <p>{product.active ? 'Активно' : 'Неактивно'}</p>\r\n      </div>,\r\n      <div className='content mt-1 mb-0' key={2}>\r\n        <button className={btnClass} onClick={props.clickEdit} data-id={product.id}>\r\n            Изменить\r\n        </button>\r\n        <button className={btnClass} onClick={() => props.deleteProduct(product.id)}>\r\n            Удалить\r\n        </button>\r\n        <button className={btnClass} onClick={props.clickActive} data-id={product.id} \r\n          data-active={!product.active}>\r\n            {product.active \r\n              ? 'Скрыть от пользователей'\r\n              : 'Показать пользователям'\r\n            }\r\n        </button>\r\n      </div>\r\n    ]\r\n  )\r\n}\r\n\r\nfunction ProductEdit (props) {\r\n  const { product, editId, categories, clickEdit, clickEditDone, clickActive, eventFetching,\r\n       deleteProductImage, addProductImage, deleteProduct } = props\r\n  let category\r\n\r\n  Object.keys(categories).forEach(key => {\r\n\r\n    if ((categories[key].name == product.category) | (categories[key].id == product.category))\r\n      category = categories[key]\r\n  })\r\n  \r\n  let edit = false\r\n  if (product.id == editId) edit = true\r\n\r\n  return (\r\n    edit \r\n    ? <UpdateProductForm \r\n        initialValues={{\r\n          id: product.id,\r\n          title: product.title,\r\n          price: product.price,\r\n          category: category.id,\r\n          description: product.description\r\n        }}\r\n        parentSubmit={clickEditDone}\r\n        clickEdit={clickEdit}\r\n        categories={categories}\r\n      />\r\n    : <div className='card card-style mt-2 mb-3 mx-1'>\r\n        <ProductContent \r\n          product={product} \r\n          clickEdit={clickEdit} \r\n          clickActive={clickActive} \r\n          deleteProduct={deleteProduct}/>\r\n\r\n        <div className='content mb-1' key={3}>\r\n          {eventFetching \r\n            ? <CircularProgress />\r\n            : product.images.length > 0 \r\n                && product.images.map(image =>\r\n                      <div className='rounded-m img-fluid mx-2 my-2 float-left'\r\n                        key={image.id} style={{\"height\": \"75px\"}}\r\n                        >\r\n                          <img src={'http://35.222.169.29' + image.catalog_image} style={{\"height\": \"75px\"}}/>\r\n                          <span className='badge badge-primary' \r\n                            onClick={() => deleteProductImage({image: image.id, id: product.id})}>\r\n                            X\r\n                          </span>\r\n                      </div>\r\n                      )\r\n            }\r\n          <div className=\"clearfix\"></div>\r\n          \r\n          <div className=\"file-data pb-4 mb-4\">\r\n            <input className='upload-file bg-highlight shadow-s rounded-s bg-blue2-light'\r\n              placeholder='Добавить фото' type='file' onChange={addProductImage} \r\n              data-product-id={product.id} />\r\n            <p className=\"upload-file-text color-white\">Добавить фото</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  )\r\n}\r\n\r\nclass ProductsEdit extends Component {\r\n  constructor(props) {\r\n    super(props);  \r\n    this.state = {\r\n      editList: [],\r\n      editId: null,\r\n      needToRefresh: false\r\n    }\r\n    this.clickEdit = this.clickEdit.bind(this);\r\n    this.clickEditDone = this.clickEditDone.bind(this);\r\n    this.clickActive = this.clickActive.bind(this);\r\n    this.addProductImage = this.addProductImage.bind(this);\r\n  }\r\n\r\n  clickEdit (e) {\r\n    const { id } = e.target.dataset\r\n    this.setState({\r\n      ...this.state, \r\n      editId: id\r\n    })\r\n  }\r\n\r\n  clickEditDone () {\r\n    this.props.submitUpdateProduct()\r\n    this.setState({\r\n      ...this.state, \r\n      editId: null,\r\n    })\r\n  }\r\n\r\n  clickActive (e) {\r\n    this.props.submitActivateProduct(e.target.dataset)\r\n  }\r\n\r\n  addProductImage(e) {\r\n    this.props.addProductImage({original: e.target.files[0], id: e.target.dataset.productId})\r\n  }\r\n\r\n  render () {\r\n    const { products, eventFetching } = this.props\r\n    return (\r\n      products && products.length > 0 \r\n      ? products.map(product => \r\n        <ProductEdit \r\n          product={product}\r\n          editId={this.state.editId}\r\n          clickEdit={this.clickEdit}\r\n          clickEditDone={this.clickEditDone}\r\n          clickActive={this.clickActive}\r\n          clickDelete={this.props.clickDelete}\r\n          categories={this.props.categories}\r\n          eventFetching={eventFetching}\r\n          addProductImage={this.addProductImage}\r\n          deleteProductImage={this.props.deleteProductImage}\r\n          deleteProduct={this.props.deleteProduct}\r\n        />\r\n        )\r\n      : <p>нет позиций</p>\r\n    )\r\n  }\r\n}\r\n\r\nfunction ShopInfoEditable (props) {\r\n  const [edit, setEdit] = useState(false)\r\n  const [createNewProduct, setCNP] = useState(false)\r\n  const { shop, categories, submitUpdateProduct, submitActivateProduct, eventFetching } = props\r\n\r\n  function createAndCloseform () {\r\n    setCNP(!createNewProduct)\r\n    props.createProductSubmit()\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {edit\r\n        ? <EditShopForm \r\n            initialValues={\r\n            {name: shop ? shop.name : null,\r\n              description: shop ? shop.description : null ,\r\n              delivery:  shop ? shop.delivery : null,\r\n              id:  shop ? shop.id : null,\r\n              phone:  shop ? shop.phone : null\r\n            }}  \r\n            parentSubmit={props.parentSubmit}\r\n            setEdit={setEdit}\r\n            />\r\n        : <div className='card card-style mt-2 mx-1 mb-1'>\r\n            <div className='content'>\r\n              <h5 className='font-16'>{shop.name}</h5>\r\n              <h5 className='font-14'>{shop.phone}</h5>\r\n              <p className='font-13 mb-0'>{shop.description}</p>\r\n              <p className='font-13 mb-0'>{shop.delivery}</p>\r\n              <button className='btn btn-m mb-1 rounded-s text-uppercase font-900 shadow-s\r\n                bg-blue2' onClick={() => setEdit(true)}>Изменить</button>\r\n            </div>\r\n          </div>\r\n      }\r\n      <div className='card card-style mx-1 my-2 rounded-s text-uppercase font-700 rounded-m text-center'\r\n         onClick={() => setCNP(!createNewProduct)}>\r\n           <div className='content'>\r\n              {createNewProduct \r\n                ? 'Скрыть'\r\n                : 'Добавить продукт'\r\n              }\r\n            </div>\r\n      </div>\r\n\r\n      {createNewProduct &&\r\n        <CreateProductForm \r\n            categories={categories}\r\n            // parentSubmit={props.createProductSubmit}\r\n            parentSubmit={createAndCloseform}\r\n            initialValues={{}}\r\n          />\r\n      }\r\n\r\n      <ProductsEdit \r\n        products={shop.products} \r\n        categories={categories} \r\n        submitUpdateProduct={submitUpdateProduct}\r\n        submitActivateProduct={submitActivateProduct}\r\n        deleteProduct={props.deleteProduct}\r\n        eventFetching={eventFetching}\r\n        addProductImage={props.addProductImage}\r\n        deleteProductImage={props.deleteProductImage}\r\n      />\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nclass ShopCabinet extends Component {\r\n  constructor(props) {\r\n    super(props);  \r\n    this.state = {\r\n    }\r\n\r\n  this.submitCreateShop = this.submitCreateShop.bind(this);\r\n  this.submitUpdateShop = this.submitUpdateShop.bind(this);\r\n  this.submitCreateProduct = this.submitCreateProduct.bind(this);\r\n  this.submitUpdateProduct = this.submitUpdateProduct.bind(this);\r\n  this.submitActivateProduct = this.submitActivateProduct.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.getCategories()\r\n  }\r\n\r\n  submitUpdateShop(){\r\n    this.props.updateShop(this.props.state.form.editShopForm.values)\r\n  }\r\n\r\n  submitCreateShop(){\r\n    this.props.createShop(this.props.state.form.initShopForm.values)\r\n  }\r\n\r\n  submitCreateProduct(){\r\n    this.props.createProduct(this.props.state.form.createProductForm.values)\r\n  }\r\n\r\n  submitUpdateProduct(){\r\n    this.props.updateProduct(this.props.state.form.updateProductForm.values)\r\n  }\r\n\r\n  submitActivateProduct(data){\r\n    this.props.updateProduct({id: data.id, active: data.active})\r\n  }\r\n\r\n  render() {\r\n    const { user, shop, categories } = this.props\r\n    const { eventFetching } = this.props.state.shops\r\n    console.log(this.props.state)\r\n    return (\r\n      user && !user.shop \r\n        ? <InitShopForm  parentSubmit={this.submitCreateShop} user={user}\r\n          initialValues={{name: user ? user.nickname : null, profile_id: user ? user.id : null}}/>\r\n        : shop && \r\n          <ShopInfoEditable \r\n            shop={shop}\r\n            user={user}\r\n            getShopDetail={this.props.getShopDetail}\r\n            parentSubmit={this.submitUpdateShop}\r\n\r\n            getShopDetail={this.props.getShopDetail}\r\n            createProductSubmit={this.submitCreateProduct}\r\n            categories={categories}\r\n            submitUpdateProduct={this.submitUpdateProduct}\r\n            submitActivateProduct={this.submitActivateProduct}\r\n            deleteProduct={this.props.deleteProduct}\r\n\r\n            addProductImage={this.props.addProductImage}\r\n            deleteProductImage={this.props.deleteProductImage}\r\n\r\n            eventFetching={eventFetching}\r\n           />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  state: state,\r\n  routing: state.routing,\r\n  user: state.auth.user,\r\n  shop: state.shops.shopOwn,\r\n  categories: state.products.categories\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getShopDetail: id => dispatch(ShopActions.getShopDetailRequest(id)),\r\n  createShop: (data) => dispatch(ShopActions.createShopRequest(data)),\r\n  updateShop: (data) => dispatch(ShopActions.updateShopRequest(data)),\r\n\r\n  createProduct: (data) => dispatch(ShopActions.createProductRequest(data)),\r\n  updateProduct: (data) => dispatch(ShopActions.partialUpdateProductRequest(data)),\r\n  deleteProduct: id => dispatch(ShopActions.deleteProductRequest(id)),\r\n\r\n  addProductImage: (data) => dispatch(ShopActions.addProductImageRequest(data)),\r\n  deleteProductImage: (data) => dispatch(ShopActions.deleteProductImageRequest(data)),\r\n\r\n  getCategories: query => dispatch(ProductsActions.getCategoriesRequest(query)),\r\n\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ShopCabinet);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Main from '../containers/Main';\r\n\r\nimport AuthActions from '../redux/redux-sauce/auth';\r\n\r\n\r\nclass ViberAuthenticationComponent extends Component {\r\n    componentDidMount() {\r\n      // const token = localStorage.getItem('token');\r\n      const { token } = this.props.match.params\r\n      if (token) {\r\n        this.props.checkToken(token);\r\n      }\r\n    }\r\n\r\n    render() {\r\n      let access = false\r\n      if (this.props.isLoggedIn === true) access = true\r\n      return (\r\n          <div>\r\n              {access\r\n                  ? <Main />\r\n                  : 'Не авторизован'\r\n              }\r\n          </div>\r\n      )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isLoggedIn: state.auth.isLoggedIn,\r\n    user: state.auth.user,\r\n    state: state\r\n});\r\n\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    checkToken: (token) => dispatch(AuthActions.checkTokenRequest(token)),\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ViberAuthenticationComponent);\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from \"react-router-dom\";\r\nimport { url } from '../redux/api/endpoints';\r\n\r\n// actions\r\nimport AuthActions from '../redux/redux-sauce/auth';\r\n\r\n\r\nfunction ModalAuth (props){\r\n  return (\r\n    <div className=\"modal fade\" id=\"authModal\" tabindex=\"-1\" role=\"dialog\" \r\n      aria-labelledby=\"authModalLabel\" aria-hidden=\"true\">\r\n      <div className=\"modal-dialog\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\" id=\"authModalLabel\">Войти с помощью</h5>\r\n            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <a href='viber://pa?chatURI=dm-eda&context=Chto_za_CONTEXT?&text=войти'>Войти через вайбер</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nclass Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    }\r\n    this.login = this.login.bind(this);\r\n    this.login2 = this.login2.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      this.props.checkToken(token);\r\n    }\r\n  }\r\n\r\n  login () {\r\n    this.props.login({username: 'kzr', password: 'qwerty123'})\r\n  }\r\n\r\n  login2 () {\r\n    this.props.login({username: 'test_user1', password: 'svinbin123'})\r\n  }\r\n\r\n  render() {\r\n    const { isLoggedIn, user } = this.props.auth\r\n    return (\r\n      <div className='header'>\r\n        <Link className='font-20 float-left ml-4 mt-3' to='/'>\r\n          <h4 className=''>Домашняя продукция</h4>\r\n        </Link>\r\n        <a href={`viber://forward?text=${url}`}>JOOPZ</a>\r\n        {isLoggedIn \r\n          ? user && user.shop \r\n            ? <div className='float-right'>\r\n                <Link to='/dm/shops/my/'>Мои объявления</Link>\r\n                <p>{user.nickname} <button onClick={this.props.logout}>Выйти</button></p>\r\n              </div>\r\n            : <div className='float-right'>\r\n                <Link to='/dm/shops/my/'>Создать обьявление</Link>\r\n                <p>{user.nickname} <button onClick={this.props.logout}>Выйти</button></p>\r\n              </div>\r\n          : <div>\r\n              <button className='btn' data-toggle=\"modal\" data-target=\"#authModal\">Создать обьявление</button>\r\n              <button className='btn'onClick={this.login}>Войти</button>\r\n              <button className='btn'onClick={this.login2}>Войти2</button>\r\n            </div>\r\n        }\r\n        <div className='clearfix'></div>\r\n        <ModalAuth/>\r\n        \r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n  state: state\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  checkToken: (token) => dispatch(AuthActions.checkTokenRequest(token)),\r\n  logout: () => dispatch(AuthActions.logoutRequest()),\r\n  login: (data) => dispatch(AuthActions.loginRequest(data)),\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Header);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useHistory, useParams } from 'react-router-dom'\r\n\r\nimport { url } from '../redux/api/endpoints';\r\n// actions\r\nimport ShopActions from '../redux/redux-sauce/shops';\r\n\r\n\r\nclass AccountAdsContainer extends Component {\r\n  constructor(props) {\r\n    super(props);  \r\n    this.state = {\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  render() {\r\n    \r\n    return (\r\n        <div className='container-fluid shop-detail'>\r\n          <p>AccountAdsContainer</p>\r\n          <div>\r\n            {this.props.children}\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  state: state,\r\n  routing: state.routing,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getShopDetail: id => dispatch(ShopActions.getShopDetailRequest(id)),\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(AccountAdsContainer);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n} from \"react-router-dom\";\r\n\r\nimport { Provider } from 'react-redux';\r\nimport configureStore from './redux/store/';\r\n\r\n// Containers\r\nimport Main from './containers/Main'\r\nimport ShopDetail from './containers/ShopDetail'\r\nimport ShopCabinet from './containers/ShopCabinet'\r\nimport ViberAuthenticationComponent from './containers/ViberLogin'\r\nimport Header from './containers/HeaderContainer'\r\nimport AccountAdsContainer from './containers/AccountAdsContainer'\r\n\r\nconst store = configureStore()\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <Router>\r\n      <div classname='app' id=\"page\">\r\n        <Header />\r\n        {/* <div className='footer'>\r\n          <p className='foot-title'>Домашняя продукция</p>\r\n        </div> */}\r\n        <div className=\"page-content header-clear\">\r\n          <Switch>\r\n            <Route exact path=\"/\">\r\n              <Main />\r\n            </Route>\r\n            <Route exact path=\"/dm/categories/:catName/\">\r\n              <Main />\r\n            </Route>\r\n            <Route path=\"/dm/shops/:shopId/products/:catName\" component={ShopDetail} />\r\n            <Route path=\"/dm/shops/my/\" component={ShopCabinet} />\r\n            {/* <Route path=\"/dm/account/ads/:shopId/\">\r\n              <AccountAdsContainer />\r\n            </Route>  */}\r\n            <Route path=\"/dm/login/v/:token\" component={ViberAuthenticationComponent} />\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    </Router>\r\n  </Provider>, document.getElementById('root')\r\n);","import _ from 'lodash';\r\n\r\nexport const toggleArray = (arr: Array<String>, string: string) => {\r\n    if (arr.indexOf(string) === -1) {\r\n      return [...arr, string]\r\n    } else {\r\n      return arr.filter(item => item !== string)\r\n    }\r\n  }\r\n\r\nexport const lodashToggle = (array, item) => _.xor(array, [item])\r\n\r\nexport const toggleArrayLocations = (arr: Array<Object>, location: Object) => {\r\n  let alreadyIn = false;\r\n  let index = -1;\r\n  for (var i = 0; i < arr.length; i++){\r\n    if (_.isEqual(arr[i], location)){\r\n      alreadyIn = true;\r\n      index = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (alreadyIn){\r\n    arr.splice(index, 1);\r\n    return arr\r\n  } else {\r\n    return [...arr, location]\r\n  }\r\n}\r\n\r\nexport const addItemToArray = (arr: Array<String>, string: string) => {\r\n    return [...arr, string]\r\n  }\r\n\r\nexport const removeItemFromArray = (arr: Array<String>, string: string) => {\r\n    return arr.filter(item => item !== string)\r\n}\r\n\r\nexport const uniq = a => [...new Set(a)]\r\n\r\n\r\nexport const convertSowsByTours2 = (sowsByToursElemList) => {\r\n  let outputDict = {};\r\n  sowsByToursElemList.map((listElem) => {\r\n    let columns = {};\r\n    outputDict[listElem['tour']['id']] = columns;\r\n    columns['count'] = listElem['count'];\r\n    columns['checked'] = false;\r\n    columns['rows'] = {};\r\n    listElem['sows'].map(sowElem => {\r\n      columns['rows'][sowElem['farm_id']] = {}\r\n      columns['rows'][sowElem['farm_id']]['active'] = false\r\n      columns['rows'][sowElem['farm_id']]['id'] = sowElem['id']\r\n      columns['rows'][sowElem['farm_id']]['status'] = sowElem['status']\r\n    });\r\n  });\r\n  return outputDict\r\n}\r\n\r\nexport const convertSowsByTours = (sowsByToursElemList) => {\r\n  let outputDict = {};\r\n  sowsByToursElemList.map((listElem) => {\r\n    let columns = {};\r\n    outputDict[listElem['title']] = columns;\r\n    columns['count'] = listElem['count'];\r\n    columns['checked'] = false;\r\n    columns['rows'] = {};\r\n    listElem['sows'].map(sowElem => {\r\n      columns['rows'][sowElem['id']] = {}\r\n      columns['rows'][sowElem['id']]['active'] = false\r\n      columns['rows'][sowElem['id']]['id'] = sowElem['id']\r\n      columns['rows'][sowElem['id']]['status'] = sowElem['status']\r\n      columns['rows'][sowElem['id']]['farm_id'] = sowElem['farm_id']\r\n    });\r\n  });\r\n  return outputDict\r\n}\r\n\r\n\r\nexport const getObjectbyId = (list, id) => {\r\n  let obj = null\r\n  list.map(element => {\r\n    if (element['id'] == id)\r\n      obj = element\r\n  })\r\n  return obj\r\n}\r\n\r\nexport const getObjectInListbyFieldValue = (list, field, value) => {\r\n  let obj = null\r\n  list.map(element => {\r\n    if (element[field] == value)\r\n      obj = element\r\n  })\r\n  return obj\r\n}\r\n\r\nexport const toggleArrayDictById= (arr: Array<Object>, obj: Object) => {\r\n  let alreadyIn = false;\r\n  let index = -1;\r\n\r\n  for (var i = 0; i < arr.length; i++){\r\n    if (arr[i].id === obj.id){\r\n      alreadyIn = true;\r\n      index = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (alreadyIn){\r\n    arr.splice(index, 1);\r\n    return arr\r\n  } else {\r\n    return [...arr, obj]\r\n  }\r\n}","import { createReducer, createActions } from 'reduxsauce'\r\nimport Immutable from 'seamless-immutable'\r\n\r\nimport { getObjectbyId, lodashToggle } from '../../components/utils'\r\n\r\n\r\n/* ------------- Types and Action Creators ------------- */\r\nconst { Types, Creators } = createActions({\r\n    getShopsRequest: ['payload'],\r\n    getShopsFail: ['payload'],\r\n    getShopsSuccess: ['payload'],\r\n\r\n    getShopDetailRequest: ['payload'],\r\n    getShopDetailFail: ['error'],\r\n    getShopDetailSuccess: ['payload'],\r\n\r\n    getShopOwnRequest: ['payload'],\r\n    getShopOwnFail: ['error'],\r\n    getShopOwnSuccess: ['payload'],\r\n\r\n    createShopRequest: ['payload'],\r\n    createShopFail: ['payload'],\r\n    createShopSuccess: ['payload'],\r\n\r\n    updateShopRequest: ['payload'],\r\n    updateShopFail: ['payload'],\r\n    updateShopSuccess: ['payload'],\r\n\r\n    createProductRequest: ['payload'],\r\n    createProductFail: ['payload'],\r\n    createProductSuccess: ['payload'],\r\n\r\n    partialUpdateProductRequest: ['payload'],\r\n    partialUpdateProductFail: ['payload'],\r\n    partialUpdateProductSuccess: ['payload'],\r\n\r\n    deleteProductRequest: ['payload'],\r\n    deleteProductFail: ['payload'],\r\n    deleteProductSuccess: ['payload'],\r\n\r\n    addProductImageRequest: ['payload'],\r\n    addProductImageFail: ['payload'],\r\n    addProductImageSuccess: ['payload'],\r\n\r\n    deleteProductImageRequest: ['payload'],\r\n    deleteProductImageFail: ['payload'],\r\n    deleteProductImageSuccess: ['payload'],\r\n\r\n    addToFeedbacksList: ['user_id'],\r\n    removeFromFeedbacksList: ['user_id'],\r\n\r\n    likeShopRequest: ['payload'],\r\n    likeShopFail: ['error'],\r\n    likeShopSuccess: ['payload'],\r\n})\r\n\r\nexport const ShopsTypes = Types\r\nexport default Creators\r\n\r\n\r\n/* ------------- Initial State ------------- */\r\nexport const INITIAL_STATE = Immutable({\r\n    listFetching: false,\r\n    shop_list: [],\r\n    errorList: null,\r\n\r\n    detailFetching: null,\r\n    shopDetail: null,\r\n    errorDetail: null,\r\n\r\n    shopOwn: null,\r\n\r\n    eventFetching: null,\r\n    eventError: null,\r\n\r\n    message: '',\r\n})\r\n\r\n\r\n/* ------------- Selectors ------------- */\r\nexport const ShopsSelectors = {\r\n    getShops: state => state.shops.shop_list,\r\n}\r\n\r\n\r\n/* ------------- Reducers ------------- */\r\n// Get\r\nexport const getShopsRequest = (state, { payload }) => {\r\n    return state.merge({ listFetching: true, shop_list: [] })\r\n}\r\n\r\nexport const getShopsSuccess = (state, { payload }) => {\r\n    return state.merge({ listFetching: false, errorList: null, shop_list: payload })\r\n}\r\n\r\nexport const getShopsFail = (state, { payload }) => {\r\n    return state.merge({ listFetching: false, errorList:payload, shop_list: [] })\r\n}\r\n\r\n// Get one\r\nexport const getShopDetailRequest = (state, { payload }) => {\r\n    return state.merge({ detailFetching: true, })\r\n}\r\n\r\nexport const getShopDetailSuccess = (state, { payload }) => {\r\n    return state.merge({ detailFetching: false, errorDetail: null, shopDetail: payload,})\r\n}\r\n\r\nexport const getShopDetailFail = (state, { error }) => {\r\n    return state.merge({ detailFetching: false, errorDetail: error, shopDetail: null })\r\n}\r\n\r\n// Get own\r\nexport const getShopOwnRequest = (state, { payload }) => {\r\n    return state.merge({ detailFetching: true, })\r\n}\r\n\r\nexport const getShopOwnSuccess = (state, { payload }) => {\r\n    return state.merge({ detailFetching: false, errorDetail: null, shopOwn: payload,})\r\n}\r\n\r\nexport const getShopOwnFail = (state, { error }) => {\r\n    return state.merge({ detailFetching: false, errorDetail: error, shopOwn: null })\r\n}\r\n\r\n// create shop\r\nexport const createShopRequest = (state, { payload }) => {\r\n    return state.merge({ eventFetching: true, message: '' })\r\n}\r\n\r\nexport const createShopSuccess = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorList: null, message: payload.message, \r\n        shopOwn: payload.shop })\r\n}\r\n\r\nexport const createShopFail = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorList:payload, message: '' })\r\n}\r\n\r\n// update shop\r\nexport const updateShopRequest = (state, { payload }) => {\r\n    return state.merge({ eventFetching: true, message: '' })\r\n}\r\n\r\nexport const updateShopSuccess = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorList: null, \r\n        shopOwn: {\r\n            ...state.shopOwn,\r\n            ...payload\r\n        }\r\n    })\r\n}\r\n\r\nexport const updateShopFail = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorList: payload, message: '' })\r\n}\r\n\r\n// create product\r\nexport const createProductRequest = (state, { payload }) => {\r\n    return state.merge({ eventFetching: true, message: '' })\r\n}\r\n\r\nexport const createProductSuccess = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, eventError: null,  \r\n        shopOwn: {...state.shopOwn, products: [...state.shopOwn.products, payload]} })\r\n}\r\n\r\nexport const createProductFail = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, eventError:payload, message: '' })\r\n}\r\n\r\n// partial update product\r\nexport const partialUpdateProductRequest = (state, { payload }) => {\r\n    return state.merge({ eventFetching: true, message: '' })\r\n}\r\n\r\nexport const partialUpdateProductSuccess = (state, { payload }) => {\r\n    const productInList = getObjectbyId(state.shopOwn.products, payload.id)\r\n    const index = state.shopOwn.products.indexOf(productInList)\r\n    return state.merge({ \r\n        eventFetching: false,\r\n        errorList: null,\r\n        message: payload.message, \r\n        shopOwn: {\r\n            ...state.shopOwn,\r\n            products: [\r\n                ...state.shopOwn.products.slice(0, index),\r\n                payload,\r\n                ...state.shopOwn.products.slice(index + 1)\r\n            ]\r\n        },\r\n        })\r\n}\r\n\r\nexport const partialUpdateProductFail = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorList:payload, message: '' })\r\n}\r\n\r\n// delete product\r\nexport const deleteProductRequest = (state, { payload }) => {\r\n    return state.merge({ eventFetching: true, message: '' })\r\n}\r\n\r\nexport const deleteProductSuccess = (state, { payload }) => {\r\n    const productInList = getObjectbyId(state.shopOwn.products, payload.id)\r\n    const index = state.shopOwn.products.indexOf(productInList)\r\n    return state.merge({ \r\n        eventFetching: false,\r\n        errorList: null,\r\n        message: payload.message, \r\n        shopOwn: {\r\n            ...state.shopOwn,\r\n            products: [\r\n                ...state.shopOwn.products.slice(0, index),\r\n                ...state.shopOwn.products.slice(index + 1)\r\n            ]\r\n        },\r\n        })\r\n}\r\n\r\nexport const deleteProductFail = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorList:payload, message: '' })\r\n}\r\n\r\n// add product image\r\nexport const addProductImageRequest = (state, { payload }) => {\r\n    return state.merge({ eventFetching: true, message: '' })\r\n}\r\n\r\nexport const addProductImageSuccess = (state, { payload }) => {\r\n    const productInList = getObjectbyId(state.shopOwn.products, payload.product.id)\r\n    const index = state.shopOwn.products.indexOf(productInList)\r\n    return state.merge({ \r\n        eventFetching: false,\r\n        errorList: null,\r\n        message: payload.message, \r\n        shopOwn: {\r\n            ...state.shopOwn,\r\n            products: [\r\n                ...state.shopOwn.products.slice(0, index),\r\n                payload.product,\r\n                ...state.shopOwn.products.slice(index + 1)\r\n            ]\r\n        },\r\n        })\r\n}\r\n\r\nexport const addProductImageFail = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorList:payload, message: '' })\r\n}\r\n\r\n// delete job image\r\nexport const deleteProductImageRequest = (state, { payload }) => {\r\n    return state.merge({ eventFetching: true, message: '' })\r\n}\r\n\r\nexport const deleteProductImageSuccess = (state, { payload }) => {\r\n    const productInList = getObjectbyId(state.shopOwn.products, payload.product.id)\r\n    const index = state.shopOwn.products.indexOf(productInList)\r\n    return state.merge({ \r\n        eventFetching: false,\r\n        errorList: null,\r\n        message: payload.message, \r\n        shopOwn: {\r\n            ...state.shopOwn,\r\n            products: [\r\n                ...state.shopOwn.products.slice(0, index),\r\n                payload.product,\r\n                ...state.shopOwn.products.slice(index + 1)\r\n            ]\r\n        },\r\n        })\r\n}\r\n\r\nexport const deleteProductImageFail = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, errorList:payload, message: '' })\r\n}\r\n\r\n// add profile id to feedback list\r\nexport const addToFeedbacksList = (state, { user_id }) => {\r\n    return state.merge({ \r\n        shopDetail: {\r\n            ...state.shopDetail,\r\n            feedbacks_list: [\r\n                ...state.shopDetail.feedbacks_list,\r\n                user_id\r\n            ]\r\n        } })\r\n}\r\n\r\n// add profile id to feedback list\r\nexport const removeFromFeedbacksList = (state, { user_id }) => {\r\n    let feedbacks_list = lodashToggle(state.shopDetail.feedbacks_list, user_id)\r\n\r\n    return state.merge({ \r\n        shopDetail: {\r\n            ...state.shopDetail,\r\n            feedbacks_list: feedbacks_list\r\n        } })\r\n}\r\n\r\n// like shop\r\nexport const likeShopRequest = (state, { payload }) => {\r\n    return state.merge({ eventFetching: true, message: '' })\r\n}\r\n\r\nexport const likeShopSuccess = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, eventError: null, \r\n        shopDetail: {\r\n            ...state.shopDetail,\r\n            likes_list: payload.likes_list\r\n        }\r\n    })\r\n}\r\n\r\nexport const likeShopFail = (state, { payload }) => {\r\n    return state.merge({ eventFetching: false, eventError: payload, message: '' })\r\n}\r\n/* ------------- Hookup Reducers To Types ------------- */\r\n\r\nexport const reducer = createReducer(INITIAL_STATE, {\r\n    [Types.GET_SHOPS_REQUEST]: getShopsRequest,\r\n    [Types.GET_SHOPS_SUCCESS]: getShopsSuccess,\r\n    [Types.GET_SHOPS_FAIL]: getShopsFail,\r\n\r\n    [Types.GET_SHOP_DETAIL_REQUEST]: getShopDetailRequest,\r\n    [Types.GET_SHOP_DETAIL_SUCCESS]: getShopDetailSuccess,\r\n    [Types.GET_SHOP_DETAIL_FAIL]: getShopDetailFail,\r\n\r\n    [Types.GET_SHOP_OWN_REQUEST]: getShopOwnRequest,\r\n    [Types.GET_SHOP_OWN_SUCCESS]: getShopOwnSuccess,\r\n    [Types.GET_SHOP_OWN_FAIL]: getShopOwnFail,\r\n\r\n    [Types.CREATE_SHOP_REQUEST]: createShopRequest,\r\n    [Types.CREATE_SHOP_SUCCESS]: createShopSuccess,\r\n    [Types.CREATE_SHOP_FAIL]: createShopFail,\r\n\r\n    [Types.UPDATE_SHOP_REQUEST]: updateShopRequest,\r\n    [Types.UPDATE_SHOP_SUCCESS]: updateShopSuccess,\r\n    [Types.UPDATE_SHOP_FAIL]: updateShopFail,\r\n\r\n    [Types.CREATE_PRODUCT_REQUEST]: createProductRequest,\r\n    [Types.CREATE_PRODUCT_SUCCESS]: createProductSuccess,\r\n    [Types.CREATE_PRODUCT_FAIL]: createProductFail,\r\n\r\n    [Types.PARTIAL_UPDATE_PRODUCT_REQUEST]: partialUpdateProductRequest,\r\n    [Types.PARTIAL_UPDATE_PRODUCT_SUCCESS]: partialUpdateProductSuccess,\r\n    [Types.PARTIAL_UPDATE_PRODUCT_FAIL]: partialUpdateProductFail,\r\n\r\n    [Types.DELETE_PRODUCT_REQUEST]: deleteProductRequest,\r\n    [Types.DELETE_PRODUCT_SUCCESS]: deleteProductSuccess,\r\n    [Types.DELETE_PRODUCT_FAIL]: deleteProductFail,\r\n\r\n    [Types.ADD_PRODUCT_IMAGE_REQUEST]: addProductImageRequest,\r\n    [Types.ADD_PRODUCT_IMAGE_SUCCESS]: addProductImageSuccess,\r\n    [Types.ADD_PRODUCT_IMAGE_FAIL]: addProductImageFail,\r\n\r\n    [Types.DELETE_PRODUCT_IMAGE_REQUEST]: deleteProductImageRequest,\r\n    [Types.DELETE_PRODUCT_IMAGE_SUCCESS]: deleteProductImageSuccess,\r\n    [Types.DELETE_PRODUCT_IMAGE_FAIL]: deleteProductImageFail,\r\n\r\n    [Types.ADD_TO_FEEDBACKS_LIST]: addToFeedbacksList,\r\n    [Types.REMOVE_FROM_FEEDBACKS_LIST]: removeFromFeedbacksList,\r\n\r\n    [Types.LIKE_SHOP_REQUEST]: likeShopRequest,\r\n    [Types.LIKE_SHOP_SUCCESS]: likeShopSuccess,\r\n    [Types.LIKE_SHOP_FAIL]: likeShopFail,\r\n})\r\n"],"sourceRoot":""}